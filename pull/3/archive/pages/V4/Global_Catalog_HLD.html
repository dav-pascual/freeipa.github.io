<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Overview &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Overview" href="Global_Catalog_IDM_provisioning.html" />
    <link rel="prev" title="Overview" href="Global_Catalog_Access_Control.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h1>
<p>Global Catalog is a special service that exposes information about
objects in FreeIPA domain in a way expected by the clients enrolled to
Active Directory environments. Active Directory domain controllers and
other systems use Global Catalog to search across the potentially
multi-domain forest for the information about users, groups, machines,
and other types of objects.</p>
<p>A search in the Global Catalog service allows machines enrolled to an
Active Directory environment to efficiently maintain a relationship
between internal access control lists (ACLs) associated with the
resources provided by the machines, and the visual representation of the
access controls for interaction with users, locally and remotely.</p>
<p>The information stored in the Global Catalog represents a subset of the
information available at the specific domain controllers in Active
Directory.</p>
<p>A detailed overview of Global Catalog structure and design in Active
Directory can be found at the following
[<a class="reference external" href="https://msdn.microsoft.com/en-us/library/how-global-catalog-servers-work(v=ws.10).aspx">https://msdn.microsoft.com/en-us/library/how-global-catalog-servers-work(v=ws.10).aspx</a>
MSDN article].</p>
<p>Since no native FreeIPA clients are expected to use Global Catalog for
write purposes, it is only accessible in read-only mode. Any change to
the information shall come through the domain controllers responsible
for a domain in question.</p>
</section>
<section id="supported-naming-contexts">
<span id="id1"></span><h1>Supported naming contexts<a class="headerlink" href="#supported-naming-contexts" title="Permalink to this heading">¶</a></h1>
<p>There are three naming contexts which exist in Active Directory: Schema
Naming Context, Configuration Naming Context, and Domain Naming Context.
The scope for Global Catalog service in FreeIPA is limited to Domain
Naming Context in initial implementation.</p>
</section>
<section id="supported-ports-and-protocols">
<span id="id2"></span><h1>Supported ports and protocols<a class="headerlink" href="#supported-ports-and-protocols" title="Permalink to this heading">¶</a></h1>
<p>FreeIPA Global Catalog service is only available over TCP port 3268 in
the first implementation phase. Retrieval and update of universal group
membership cache over TCP port 135 is not planned to be supported. The
latter is a feature of Active Directory used by its domain controllers
over DCE RPC protocol stack. Samba implements corresponding
functionality for user and group name lookups with the help of the
primary FreeIPA LDAP server instance.</p>
</section>
<section id="global-catalog-provisioning">
<span id="id3"></span><h1>Global Catalog provisioning<a class="headerlink" href="#global-catalog-provisioning" title="Permalink to this heading">¶</a></h1>
<p>The data in Global Catalog is provisioned from the primary LDAP server
instance running on the same FreeIPA master. A SYNCREPL mechanism is
used to retrieve the changes and a modified <strong>slapi-nis</strong> module is used
to transform FreeIPA original data to a schema compatible with Global
Catalog in Active Directory. Unlike the original <strong>slapi-nis</strong> module,
the data is stored in a proper LDAP backend so it is persistent across
the directory server restarts.</p>
</section>
<section id="gc-tree-structure">
<span id="id4"></span><h1>GC tree structure<a class="headerlink" href="#gc-tree-structure" title="Permalink to this heading">¶</a></h1>
<p>In Active Directory Global Catalog contains directory data for all
domains in a forest. For an Active Directory forest with multiple forest
roots this means multiple domain suffixes exist in the Global Catalog
tree. For FreeIPA there is only a single domain that corresponds to the
forest tree and thus only a single domain suffix is hosted in the Global
Catalog.</p>
<p>Since FreeIPA is built around a flat DIT, there are no organizational
units available. As result, object-specific containers are children of
the forest domain suffix: e.g. for users a subtree of
<strong>cn=users,dc=example,dc=com</strong> is used.</p>
</section>
<section id="gc-schema-mapping">
<span id="id5"></span><h1>GC schema mapping<a class="headerlink" href="#gc-schema-mapping" title="Permalink to this heading">¶</a></h1>
<p>There are two separate mapping processes: first, a data from the primary
FreeIPA LDAP instance needs to be mapped to a schema expected by Active
Directory clients consuming Global Catalog service. However, the Global
Catalog schema itself requires transformation so that it could be used
in 389-ds directory server environment.</p>
<section id="freeipa-schema-to-gc-schema-mapping">
<span id="id6"></span><h2>FreeIPA schema to GC schema mapping<a class="headerlink" href="#freeipa-schema-to-gc-schema-mapping" title="Permalink to this heading">¶</a></h2>
<p>To perform data transformation from the primary FreeIPA LDAP instance to
GC instance, a plugin that consumes original LDAP objects from the
primary FreeIPA LDAP instance will be written. This plugin will use an
infrastructure to transform LDAP objects developed as part of the
<strong>slapi-nis</strong> plugin.</p>
<p>Schema compatibility plugin (<strong>slapi-nis</strong>) has a special language to
define transformations of the LDAP objects. A detailed description of
the formatting language is provided in the <a class="reference external" href="https://git.fedorahosted.org/cgit/slapi-nis.git/tree/doc/format-specifiers.txt">slapi-nis
documentation</a>.</p>
</section>
<section id="equality-and-attribute-syntax-rules-mapping">
<span id="id7"></span><h2>Equality and attribute syntax rules mapping<a class="headerlink" href="#equality-and-attribute-syntax-rules-mapping" title="Permalink to this heading">¶</a></h2>
<p>Global Catalog instance schema is derived from a schema published by
Microsoft through WSPP program as MS-ADSC document,
<a class="reference external" href="http://msdn.microsoft.com/en-us/library/cc221630.aspx">http://msdn.microsoft.com/en-us/library/cc221630.aspx</a>. Schema files are
available in LDIF format from
<a class="reference external" href="http://go.microsoft.com/fwlink/?LinkId=212555">http://go.microsoft.com/fwlink/?LinkId=212555</a> and processed with the
help of a converting script. The script to convert schema to 389-ds
format is based on a similar script from Samba (ms_schema.py) which only
supports non-validating output for LDB database. FreeIPA’s version has
to generate valid schema in 389-ds format and thus adds mapping between
schema attribute definitions existing in 389-ds and MS-ADSC. In
particular, attribute types, their ordering and matching functions
mapped to those of 389-ds.</p>
<table class="docutils align-default" id="id10">
<caption><span class="caption-text">Equality rules mapping</span><a class="headerlink" href="#id10" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Original syntax</p></th>
<th class="head"><p>Mapped syntax</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2.5.5.8</p></td>
<td><p>booleanMatch</p></td>
</tr>
<tr class="row-odd"><td><p>2.5.5.9</p></td>
<td><p>integerMatch</p></td>
</tr>
<tr class="row-even"><td><p>2.5.5.16</p></td>
<td><p>integerMatch</p></td>
</tr>
<tr class="row-odd"><td><p>2.5.5.14</p></td>
<td><p>distinguishedNameMatch</p></td>
</tr>
<tr class="row-even"><td><p>1.3.12.2.1011.28.0.702</p></td>
<td><p>octetStringMatch</p></td>
</tr>
<tr class="row-odd"><td><p>1.2.840.113556.1.1.1.12</p></td>
<td><p>distinguishedNameMatch</p></td>
</tr>
<tr class="row-even"><td><p>2.5.5.7</p></td>
<td><p>octetStringMatch</p></td>
</tr>
<tr class="row-odd"><td><p>2.6.6.1.2.5.11.29</p></td>
<td><p>octetStringMatch</p></td>
</tr>
<tr class="row-even"><td><p>1.2.840.113556.1.1.1.11</p></td>
<td><p>octetStringMatch</p></td>
</tr>
<tr class="row-odd"><td><p>2.5.5.13</p></td>
<td><p>caseIgnoreMatch</p></td>
</tr>
<tr class="row-even"><td><p>2.5.5.10</p></td>
<td><p>octetStringMatch</p></td>
</tr>
<tr class="row-odd"><td><p>2.5.5.3</p></td>
<td><p>caseIA5Match</p></td>
</tr>
<tr class="row-even"><td><p>2.5.5.5</p></td>
<td><p>caseIA5Match</p></td>
</tr>
<tr class="row-odd"><td><p>2.5.5.15</p></td>
<td><p>octetStringMatch</p></td>
</tr>
<tr class="row-even"><td><p>2.5.5.6</p></td>
<td><p>numericStringMatch</p></td>
</tr>
<tr class="row-odd"><td><p>2.5.5.2</p></td>
<td><p>objectIdentifierMatch</p></td>
</tr>
<tr class="row-even"><td><p>2.5.5.10</p></td>
<td><p>octetStringMatch</p></td>
</tr>
<tr class="row-odd"><td><p>2.5.5.17</p></td>
<td><p>caseExactMatch</p></td>
</tr>
<tr class="row-even"><td><p>2.5.5.4</p></td>
<td><p>caseIgnoreMatch</p></td>
</tr>
<tr class="row-odd"><td><p>2.5.5.12</p></td>
<td><p>caseIgnoreMatch</p></td>
</tr>
<tr class="row-even"><td><p>2.5.5.11</p></td>
<td><p>generalizedTimeMatch</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id11">
<caption><span class="caption-text">Attribute syntax mapping</span><a class="headerlink" href="#id11" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Original syntax</p></th>
<th class="head"><p>Mapped syntax</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2.5.5.8</p></td>
<td><p>1.3.6.1.4.1.1466.115.121.1.7</p></td>
</tr>
<tr class="row-odd"><td><p>2.5.5.9</p></td>
<td><p>1.3.6.1.4.1.1466.115.121.1.27</p></td>
</tr>
<tr class="row-even"><td><p>2.5.5.16</p></td>
<td><p>1.3.6.1.4.1.1466.115.121.1.27</p></td>
</tr>
<tr class="row-odd"><td><p>2.5.5.14</p></td>
<td><p>1.3.6.1.4.1.1466.115.121.1.12</p></td>
</tr>
<tr class="row-even"><td><p>1.3.12.2.1011.28.0.702</p></td>
<td><p>1.3.6.1.4.1.1466.115.121.1.5</p></td>
</tr>
<tr class="row-odd"><td><p>1.2.840.113556.1.1.1.12</p></td>
<td><p>1.3.6.1.4.1.1466.115.121.1.12</p></td>
</tr>
<tr class="row-even"><td><p>2.5.5.7</p></td>
<td><p>1.3.6.1.4.1.1466.115.121.1.12</p></td>
</tr>
<tr class="row-odd"><td><p>2.6.6.1.2.5.11.29</p></td>
<td><p>1.3.6.1.4.1.1466.115.121.1.12</p></td>
</tr>
<tr class="row-even"><td><p>1.2.840.113556.1.1.1.11</p></td>
<td><p>1.3.6.1.4.1.1466.115.121.1.12</p></td>
</tr>
<tr class="row-odd"><td><p>2.5.5.13</p></td>
<td><p>1.3.6.1.4.1.1466.115.121.1.43</p></td>
</tr>
<tr class="row-even"><td><p>1.3.12.2.1011.28.0.732</p></td>
<td><p>1.3.6.1.4.1.1466.115.121.1.43</p></td>
</tr>
<tr class="row-odd"><td><p>2.5.5.10</p></td>
<td><p>1.3.6.1.4.1.1466.115.121.1.5</p></td>
</tr>
<tr class="row-even"><td><p>1.2.840.11.3556.1.1.1.6</p></td>
<td><p>1.3.6.1.4.1.1466.115.121.1.5</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="auxiliary-classes">
<span id="id8"></span><h1>Auxiliary classes<a class="headerlink" href="#auxiliary-classes" title="Permalink to this heading">¶</a></h1>
<p>Active Directory schema supports multiple inheritance through use of
auxiliaryClass and systemAuxiliaryClass attributes. 389-ds does not
support mechanism to specify multiple superior classes in the schema. In
result, we need to explicitly add these classes to the objects of a
specific objectClass type on creation.</p>
</section>
<section id="tree-structure-correctness">
<span id="id9"></span><h1>Tree structure correctness<a class="headerlink" href="#tree-structure-correctness" title="Permalink to this heading">¶</a></h1>
<p>Active Directory schema describes types of objects that may contain the
object of a type through systemPossSuperiors and possSuperiors
attributes. 389-ds does not support this type enforcement. In result, we
need to explicitly check these requirements on the object creation.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../_sources/archive/pages/V4/Global_Catalog_HLD.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>