<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Overview &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="The CAPTCHA" href="Community_Portal_Captcha.html" />
    <link rel="prev" title="Overview" href="ClientInstallationWithAnsible.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h1>
<p>There are several use cases where the owners of a FreeIPA server might
want to allow anonymous users to interact with the FreeIPA server, such
as for self-service user registration. This proposal outlines a web
application that can interact with the FreeIPA server on behalf of an
anonymous user.</p>
<p>Source code: <a class="reference external" href="https://github.com/freeipa/freeipa-community-portal">Community Portal on
GitHub</a></p>
</section>
<section id="use-cases">
<span id="use-cases4"></span><h1>Use Cases<a class="headerlink" href="#use-cases" title="Permalink to this heading">¶</a></h1>
<section id="self-service-user-registration">
<span id="id1"></span><h2>Self-service user registration<a class="headerlink" href="#self-service-user-registration" title="Permalink to this heading">¶</a></h2>
<p>If the FreeIPA server owner wishes to allow anonymous registration, the
self-service portal allows users to input a set of preconfigured fields
and submit them to the FreeIPA server, creating a staged user with these
field values. An administrator can then review account sign ups and
individually approve or reject accounts.</p>
</section>
</section>
<section id="design">
<h1>Design<a class="headerlink" href="#design" title="Permalink to this heading">¶</a></h1>
<figure class="align-default" id="id5">
<img alt="Community_portal_arch.png" src="../../../_images/Community_portal_arch.png" />
<figcaption>
<p><span class="caption-text">Community_portal_arch.png</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<section id="stand-alone-web-application">
<span id="id2"></span><h2>Stand Alone Web Application<a class="headerlink" href="#stand-alone-web-application" title="Permalink to this heading">¶</a></h2>
<p>The self-service portal is designed as a stand-alone application that
communicates with the FreeIPA server using only ipalib and the RPC. The
server sees the self-service portal as it does any other client, and
never needs to directly interact with anonymous users.</p>
</section>
<section id="self-service-registration">
<span id="id3"></span><h2>Self-Service Registration<a class="headerlink" href="#self-service-registration" title="Permalink to this heading">¶</a></h2>
<p>Self-service registration is designed to make use of FreeIPA’s new
staged user feature. When users sign up for FreeIPA, the self-service
portal calls the ipalib Python API to issue a stageuser-add command.
Submission to the self-service portal is protected with a CAPTCHA. The
user’s input is then validated. If there are any errors in the user’s
inputs, the user is dropped back to the sign-up form with values
pre-filled, and a message outlining the error is displayed. If the
user’s input is valid, then the command is sent and committed on the
FreeIPA server, and the user is dropped to a completion page.</p>
</section>
<section id="administrator-notification">
<span id="id4"></span><h2>Administrator Notification<a class="headerlink" href="#administrator-notification" title="Permalink to this heading">¶</a></h2>
<p>When a user has registered, the adminstrator is sent an email describing
the new user. Confirmation or rejection of new users should be performed
manually.</p>
<p>There is talk of using D-Bus to publish a notification that a user has
signed up and then have another script subscribed to that notification
actually dispatch the email/notice/carrier pigeon. I think this solution
is over-engineered and will increase development time.</p>
</section>
<section id="extension">
<h2>Extension<a class="headerlink" href="#extension" title="Permalink to this heading">¶</a></h2>
<p>With the core framework of the Self-Service Portal built, the software
should be easily extensible so that other self-service use cases
involving the participation of an anonymous user, such as self-service
password reset, can be covered.</p>
</section>
</section>
<section id="implementation">
<h1>Implementation<a class="headerlink" href="#implementation" title="Permalink to this heading">¶</a></h1>
<p>The Self-Service Portal will be implemented as a stand-alone Python web
application. User input will be taken via forms, and client-side
scripting will be limited to visual enhancements only, in order to
greatly simplify the application and ensure compatibilty.</p>
<p>The self-service portal will be configured to use a special user account
on the FreeIPA server with very limited permissions, which means in the
event that the Community Portal is compromised, the scope of the damage
that can be done is limited to the authorized commands required by the
portal. For the self-service registration, the only permission needed is
the ability to execute “stageuser-add”.</p>
<p>The portal will use the ipalib Python API to issue commands. Validation
is performed entirely by the ipalib API, as well as the actual sending
of the command over RPC.</p>
<section id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this heading">¶</a></h2>
<p>The portal should be built using a Python web framework, in order to
simplify development and avoid having to write code directly interacting
with WSGI. A prototype is built in Flask, a lightweight Python web
framework, but Flask’s absence from the RHEL repos may mean an alternate
choice is needed.</p>
<p>The pages themselves are rendered using the Jinja2 template engine.</p>
</section>
</section>
<section id="feature-management">
<span id="feature-management4"></span><h1>Feature Management<a class="headerlink" href="#feature-management" title="Permalink to this heading">¶</a></h1>
<p>The Self-Service portal exists almost completely decoupled from the
FreeIPA core and by design cannot be interacted with via the FreeIPA
WebUI or CLI.</p>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading">¶</a></h2>
<p>The application will require some configuration to use. A user account
on the FreeIPA server with the permissions required by the self-service
portal (permission to perform stageuser-add) will need to be created.
The self-service host server will need to be configured with Kerberos
credentials so that it can access the FreeIPA server. Disabling the
self-service portal in case of a breach or coordinated attack is as
simple as shutting down the web application.</p>
<p>Scripts will be written to automatically configure and deploy the
self-service portal.</p>
</section>
</section>
<section id="how-to-test">
<span id="how-to-test4"></span><h1>How to Test<a class="headerlink" href="#how-to-test" title="Permalink to this heading">¶</a></h1>
<p>As a stand-alone application, unit and integration tests will be
written, with the boundaries between the application and ipalib mocked
out. No special testing configuration should be needed, and the
application should fit in nicely with existing continous integration
systems.</p>
<p><a class="reference external" href="Category:FreeIPA_Community_Portal">Category:FreeIPA Community
Portal</a></p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../_sources/archive/pages/V4/Community_Portal.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>