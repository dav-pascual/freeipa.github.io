<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Overview &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Overview" href="LDAP_Connection_Management_Refactoring.html" />
    <link rel="prev" title="Overview" href="Keytab_Retrieval.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h1>
<p><a class="reference external" href="V4/Keytab_Retrieval">Keytab Retrieval feature</a> defines keytab
retrieval mechanism and new LDAP schema for management of the feature.
This part utilizes the existing schema a builds a management interface,
both CLI and Web UI, on top of it.</p>
</section>
<section id="use-cases">
<h1>Use Cases<a class="headerlink" href="#use-cases" title="Permalink to this heading">¶</a></h1>
<p>Administrator allows users, groups, hosts or hostgroups to retrieve or
create a keytab of a service or a host.</p>
</section>
<section id="design">
<h1>Design<a class="headerlink" href="#design" title="Permalink to this heading">¶</a></h1>
<p>The rights for retrieval or creation of a keytab are handled by
extending the target entry with <strong>ipaAllowedOperations</strong> object class
and adding a DN of target user or group into <strong>ipaAllowedToPerform</strong>
attribute with a subtype which matches the operation.</p>
<p>Retrieval is associated with <strong>read_keys</strong> subtype, creation with
<strong>write_keys</strong>.</p>
<p><strong>host</strong> and <strong>service</strong> plugins will get new methods:
<strong>allow_retrieve_keytab</strong>, <strong>disallow_retrieve_keytab</strong>,
<strong>allow_create_keytab</strong> and <strong>disallow_create_keytab</strong>. Each command
expects principal and a list of user or groups which should be allowed
/disallowed to retrieve/create keytab of that principal.</p>
<section id="access-control">
<span id="id1"></span><h2>Access Control<a class="headerlink" href="#access-control" title="Permalink to this heading">¶</a></h2>
<p>New system permissions to allow non-admin users to manage keytab rights:</p>
<ul class="simple">
<li><p>System: Manage Host Keytab Permissions</p></li>
<li><p>System: Manage Service Keytab Permissions</p></li>
</ul>
</section>
</section>
<section id="implementation">
<h1>Implementation<a class="headerlink" href="#implementation" title="Permalink to this heading">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">ipalib</span></code> is not written with subtypes in mind. There is an assumption
that param names, which match the attribute names in LDAP also have to
be a valid python identifier. Therefore transformations in pre and post
callback were needed to circumvent this limitation. Other possibility
was to loosen the regex for checking the param name. But this approach
has a global effect which is potentially dangerous to do in a end phase
of 4-1 development.</p>
</section>
<section id="feature-management">
<h1>Feature Management<a class="headerlink" href="#feature-management" title="Permalink to this heading">¶</a></h1>
<section id="ui">
<h2>UI<a class="headerlink" href="#ui" title="Permalink to this heading">¶</a></h2>
<p>User and Host details facets will be extended with association widgets.
One for each combination of operation and entity:</p>
<ul class="simple">
<li><p>Allowed to retrieve keytab:</p>
<ul>
<li><p>Users</p></li>
<li><p>User Groups</p></li>
</ul>
</li>
<li><p>Allowed to create keytab</p>
<ul>
<li><p>Users</p></li>
<li><p>User Groups</p></li>
</ul>
</li>
</ul>
</section>
<section id="cli">
<h2>CLI<a class="headerlink" href="#cli" title="Permalink to this heading">¶</a></h2>
<div class="line-block">
<div class="line">`` ipa host-allow-retrieve-keytab HOSTNAME –users=STR –groups=STR –hosts=STR –hostgroups=STR``</div>
<div class="line">`` ipa host-disallow-retrieve-keytab HOSTNAME –users=STR –groups=STR –hosts=STR –hostgroups=STR``</div>
<div class="line">`` ipa host-allow-create-keytab HOSTNAME –users=STR –groups=STR –hosts=STR  –hostgroups=STR``</div>
<div class="line">`` ipa host-disallow-create-keytab HOSTNAME –users=STR –groups=STR –hosts=STR  –hostgroups=STR``</div>
</div>
<div class="line-block">
<div class="line">`` ipa service-allow-retrieve-keytab PRINCIPAL –users=STR –groups=STR –hosts=STR  –hostgroups=STR``</div>
<div class="line">`` ipa service-disallow-retrieve-keytab PRINCIPAL –users=STR –groups=STR –hosts=STR  –hostgroups=STR``</div>
<div class="line">`` ipa service-allow-create-keytab PRINCIPAL –users=STR –groups=STR –hosts=STR  –hostgroups=STR``</div>
<div class="line">`` ipa service-disallow-create-keytab PRINCIPAL –users=STR –groups=STR –hosts=STR  –hostgroups=STR``</div>
</div>
</section>
</section>
<section id="how-to-test">
<span id="how-to-test21"></span><h1>How to Test<a class="headerlink" href="#how-to-test" title="Permalink to this heading">¶</a></h1>
<p>See <a class="reference external" href="V4/Keytab_Retrieval">Keytab Retrieval feature</a>. Only use the CLI
or Web UI interface instead of ldapmodify to delegate the keytab
manipulation privileges.</p>
</section>
<section id="test-plan">
<span id="test-plan21"></span><h1>Test Plan<a class="headerlink" href="#test-plan" title="Permalink to this heading">¶</a></h1>
<p>Basic manipulation will be handled by RPC-tests.</p>
<p>Should be combined with tests for <a class="reference external" href="V4/Keytab_Retrieval">Keytab Retrieval
feature</a>. First set the permission here and then
check the actual functionality using <strong>ipa-getkeytab</strong>.</p>
</section>
<section id="rfe-author">
<h1>RFE Author<a class="headerlink" href="#rfe-author" title="Permalink to this heading">¶</a></h1>
<p><a class="reference external" href="User:Pvoborni">Petr Vobornik</a></p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../_sources/archive/pages/V4/Keytab_Retrieval_Management.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>