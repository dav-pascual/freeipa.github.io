<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Overview &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Overview" href="FreeIPA_to_FreeIPA_Migration.html" />
    <link rel="prev" title="Overview" href="Forward_zones.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h1>
<p>FreeIPA is using components that are capable to be run in FIPS mode but
is itself unable to do so. FreeIPA should use the components’
capabilities and not block users who want to have their system running
FIPS-enabled.</p>
<p><strong>FreeIPA only supports fresh FIPS installs, current installations
cannot be upgraded to FIPS mode.</strong></p>
</section>
<section id="use-cases">
<h1>Use Cases<a class="headerlink" href="#use-cases" title="Permalink to this heading">¶</a></h1>
<ul class="simple">
<li><p>As an administrator, I want to configure a FreeIPA server/client on a
new FIPS-enabled system so that the system complies with my
organization regulations.</p></li>
</ul>
</section>
<section id="design">
<h1>Design<a class="headerlink" href="#design" title="Permalink to this heading">¶</a></h1>
<p>To be able to use FreeIPA in an FIPS-enabled system (FIPS refers to
<a class="reference external" href="http://csrc.nist.gov/publications/fips/fips140-2/fips1402.pdf">FIPS-140-2</a>
here and henceforth) we have to make sure all the cryptographic
functions used in the whole system meet the FIPS requirements. This also
means forcing any third party libraries to use the standardized
cryptographic functions. If cryptographic functions are not necessary,
replace these with some other means fulfilling the same purpose so that
we don’t have to deal with this in the future should the standard be
updated (e.g. using hash of random bytes to get a readable version of a
generated password can be done using simple base64 encoding).</p>
<p>Another part of this effort is checking the usability of our current
components. Some of these will force different workflow which may not
suit our needs anymore as user experience usually suffers when system
security standards are raised. This may affect FreeIPA implementation
not only for FIPS mode but also on normal systems for the sake of
unification.</p>
<p>FIPS-enabled server and clients support is planned <strong>only for new
FreeIPA deployments</strong> in RHEL for new versions of FreeIPA, which means
older versions of FreeIPA servers/client and Domain Level 0 are <strong>not
supported</strong>.</p>
<section id="multiple-servers-in-topology">
<span id="id1"></span><h2>Multiple servers in topology<a class="headerlink" href="#multiple-servers-in-topology" title="Permalink to this heading">¶</a></h2>
<p>All the server in the topology have to be either FIPS-enabled or in
non-FIPS mode. Any other configuration is not supported. Disabling or
enabling FIPS mode after a server has been installed is neither
supported, nor recommended. If you aim for a FIPS-enabled topology, you
should start with a fresh FreeIPA installation on a FIPS-enabled system
from the start.</p>
<p>To prevent <em>accidentally</em> joining a non-FIPS server into a FIPS-enabled
topology or vice versa, a basic check is performed. Installation of a
replica checks whether FIPS is enabled on the master. If so, the
installation requires the replica to also be FIPS-enabled. If the master
server is detected to be in non-FIPS mode, the replica can only join if
it does not have FIPS enabled. This solution is not designed to prevent
any non-FIPS machine operating as a part of FIPS-enabled topology.</p>
</section>
</section>
<section id="implementation">
<h1>Implementation<a class="headerlink" href="#implementation" title="Permalink to this heading">¶</a></h1>
<p>As <a class="reference external" href="#Design">Design Chapter</a> suggests, any cryptographic functions
not conforming to FIPS-140-2 will either have to be replaced or their
behavior will have to differ in FIPS and non-FIPS systems should their
removal cause problems in non-FIPS FreeIPA.</p>
<p>Probably the biggest change is the switch from NSS to OpenSSL as a
backend for SSL connections in HTTPS requests. NSS implementation of SSL
in FIPS requires any user to know the password to the NSS database in
<em>/etc/ipa/nssdb</em>, which is unacceptable. See the design for this change:
<a class="reference external" href="http://www.freeipa.org/page/V4/Replace_NSS_with_OpenSSL">http://www.freeipa.org/page/V4/Replace_NSS_with_OpenSSL</a></p>
<ul class="simple">
<li><p><strong>Dependencies</strong>: No new dependencies should be introduced.</p></li>
<li><p><strong>Backup and Restore</strong>: There should be nothing new to back up.</p></li>
</ul>
<section id="multiple-servers-in-topology-1">
<span id="id2"></span><h2>Multiple servers in topology<a class="headerlink" href="#multiple-servers-in-topology-1" title="Permalink to this heading">¶</a></h2>
<p>A new environment variable <code class="docutils literal notranslate"><span class="pre">env.fips_mode</span></code> is introduced. It is a
boolean value initialized from <em>/proc/sys/crypto/fips_enabled</em>. It
indicates whether FIPS mode is enabled on the server.</p>
<p>During the replica installation check, once a remote API connection is
established and server environment data are loaded, FIPS status of the
master is checked. Then, FIPS status of the replica is checked. The
installation will proceed if and only if the status of FIPS is the same
on the master and replica. Otherwise, an error message is displayed, and
the installation is aborted.</p>
</section>
</section>
<section id="feature-management">
<h1>Feature Management<a class="headerlink" href="#feature-management" title="Permalink to this heading">¶</a></h1>
<section id="ui">
<h2>UI<a class="headerlink" href="#ui" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>SHA256 fingerprints are displayed instead of MD5.</p></li>
</ul>
</section>
<section id="cli">
<h2>CLI<a class="headerlink" href="#cli" title="Permalink to this heading">¶</a></h2>
<p>Displaying server’s FIPS mode status:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ipa</span> <span class="n">env</span> <span class="n">fips_mode</span>
</pre></div>
</div>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading">¶</a></h2>
<p>FreeIPA will detect whether FIPS is enabled from
<em>/proc/sys/crypto/fips_enabled</em>. The steps to configure a RHEL system to
go into FIPS mode can be found in the <a class="reference external" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/chap-Federal_Standards_and_Regulations.html#sec-Enabling-FIPS-Mode">official RHEL Security
Guide</a>.</p>
</section>
</section>
<section id="how-to-use">
<h1>How to Use<a class="headerlink" href="#how-to-use" title="Permalink to this heading">¶</a></h1>
<p>Set up your system to be in FIPS-enabled mode and install FreeIPA as you
would normally do. Enabling FIPS after installation of IPA on the
machine is not supported - some operations will not work.</p>
</section>
<section id="test-plan">
<h1>Test Plan<a class="headerlink" href="#test-plan" title="Permalink to this heading">¶</a></h1>
<p>Test scenarios that will be transformed to test cases for FreeIPA
<a class="reference external" href="V3/Integration_testing">Continuous Integration</a> during
implementation or review phase. This can be also link to <a class="reference external" href="https://git.fedorahosted.org/cgit/freeipa.git/">source in
cgit</a> with the test,
if appropriate.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../_sources/archive/pages/V4/FreeIPA-on-FIPS.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>