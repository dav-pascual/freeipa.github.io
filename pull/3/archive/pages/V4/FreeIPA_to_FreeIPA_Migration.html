<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Overview &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Overview" href="Global_Catalog_Access_Control.html" />
    <link rel="prev" title="Overview" href="FreeIPA-on-FIPS.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h1>
<p>Purpose of this feature is to provide means of migration between two
FreeIPA deployments that would be easy to use and allowed migration of
as large a portion of FreeIPA content as possible.</p>
<p>Existing migration feature provided by <em>ipa migrate-ds</em> command is
originally designed to migrate contents from a Directory Server. When
used for migration from another FreeIPA deployment, user has to specify
number of options in order to secure successfull migration. More
importantly, this feature only provides migration for users and groups
only.</p>
<p>New migration feature will provide means to migrate not only user and
groups, but also certificates, sudo rules, HBAC rules etc. Also since
the structure of source data is predefined, the command will require
significantly less options to run properly.</p>
</section>
<section id="use-cases">
<h1>Use Cases<a class="headerlink" href="#use-cases" title="Permalink to this heading">¶</a></h1>
<section id="user-stories">
<span id="id1"></span><h2>User stories<a class="headerlink" href="#user-stories" title="Permalink to this heading">¶</a></h2>
<p>As a company manager, I want to modernize name of the company and change
domain accordingly to maintain uniformity. In such a case, I want to be
able to migrate at least the most important contents of company’s
FreeIPA deployment to ensure as little disruption of operations as
possible.</p>
<p>As a businessman, I want to include newly acquired company into the
organization structure of my existing company. If both companies use
FreeIPA, such a transition will be less costly and more secure with a
dedicated migration tool.</p>
<p>As an administrator, I want to be able to use a tool to extract contents
of FreeIPA in case our infrastructure is damaged. Such a tool would
enable us to salvage as much data as possible by transferring it to
newly built infrastructure.</p>
</section>
</section>
<section id="design">
<h1>Design<a class="headerlink" href="#design" title="Permalink to this heading">¶</a></h1>
<p>All contents in FreeIPA deployment are saved in LDAP directory tree.
Migration from one deployment to another is thus best handled via LDAP
operations on source and target deployments - find entries for migration
on source deployment and insert them to target deployment.</p>
<p>This approach requires changes to be made for entries:</p>
<ul class="simple">
<li><p><em>domain name</em> - every attribute that contains domain name (even as
part of DN) needs to be changes to refer to domain name of target
deployment (e.g. DN, Kerberos principal, certificate subject,
references to other entries (e.g. user/manager relationship), …)</p></li>
<li><p><em>Kerberos key</em> - so far there is no way to migrate Kerberos master
key, which makes migration of Kerberos passwords and related
attributes irrelevant</p></li>
</ul>
<p>The migration cannot be performed for some entries, e.g. migration of
topology and trusts is not possible - these need to be newly created in
target deployment.</p>
<p>Types of entries that can be migrated are:</p>
<ul class="simple">
<li><p>users, groups;</p></li>
<li><p>sudo rules, sudo commands, sudo command groups;</p></li>
<li><p>hosts, services;</p></li>
<li><p>HBAC;</p></li>
<li><p>automount;</p></li>
<li><p>automember;</p></li>
<li><p>ID views;</p></li>
<li><p>ID ranges;</p></li>
<li><p>role;</p></li>
<li><p>SELinux;</p></li>
<li><p>CA ACL;</p></li>
<li><p>certificates;</p></li>
<li><p>delegation;</p></li>
<li><p>dns;</p></li>
<li><p>netgroups;</p></li>
<li><p>OTP tokens;</p></li>
<li><p>permissions;</p></li>
<li><p>privilefes;</p></li>
<li><p>password policies;</p></li>
<li><p>RADIUS;</p></li>
<li><p>selfservice;</p></li>
<li><p>vault;</p></li>
</ul>
<p>Migration is designed to be available for users with “admin” privileges
in target FreeIPA deployment. In source deployment the user can
authenticate as any user even without admin privileges, and only the
data this user has access to will be migrated.</p>
</section>
<section id="implementation">
<h1>Implementation<a class="headerlink" href="#implementation" title="Permalink to this heading">¶</a></h1>
<p>TODO</p>
<p>Entries to be migrated from original FreeIPA deployment will be
retrieved in two steps: at first, only DNs of the entries will be
retrieved via ldapsearch. Then, for each stored DN, a new ldapsearch
will be performed that will retrieve all data for the entry. This
approach is chosen to eliminate issues occuring with migrate-ds command,
which fails when migrating deployments with huge amount of entries.</p>
</section>
<section id="feature-management">
<h1>Feature Management<a class="headerlink" href="#feature-management" title="Permalink to this heading">¶</a></h1>
<section id="ui">
<h2>UI<a class="headerlink" href="#ui" title="Permalink to this heading">¶</a></h2>
<p>Web UI management for this feature is not yet considered.</p>
</section>
<section id="cli">
<h2>CLI<a class="headerlink" href="#cli" title="Permalink to this heading">¶</a></h2>
<p>TODO</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Options</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p></p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading">¶</a></h2>
<p>FreeIPA must be installed and migration enabled on target server:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ kinit admin
$ ipa config-mod --enable-migration=True
</pre></div>
</div>
<p>By default, migration is disabled when compat plugin is enabled. Either
disable compat plugin and restart Directory Server, or use
<em>–with-compat</em> option.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../_sources/archive/pages/V4/FreeIPA_to_FreeIPA_Migration.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>