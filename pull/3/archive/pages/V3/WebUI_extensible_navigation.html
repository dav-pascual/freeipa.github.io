<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Overview &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Enable compression on httpd" href="WebUI_gzip_compression.html" />
    <link rel="prev" title="AMD modules and Web UI build" href="WebUI_build.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <p>__NOTOC__</p>
<section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h1>
<p>It’s expected that Web UI plugins want to add new pages. They need a way
how to modify application navigation, for user to be able to navigate to
new pages. It’s not an easy task to do in FreeIPA up to version 3.0.
This enhancement tries to make the task easy.</p>
</section>
<section id="use-cases">
<h1>Use Cases<a class="headerlink" href="#use-cases" title="Permalink to this heading">¶</a></h1>
<p>Server plugin defines a new object type. Web UI needs to be extended to
support modification of objects of the new type.</p>
</section>
<section id="design">
<h1>Design<a class="headerlink" href="#design" title="Permalink to this heading">¶</a></h1>
<p>Web UI internals and mostly navigation code undertook a major
refactoring which is temporarily <a class="reference external" href="http://pvoborni.fedorapeople.org/doc/navigation.html">documented
outside</a> of
this wiki.</p>
<p>This refactoring introduces a menu object which contains an menu item
object store. Menu object is observed by menu widget. Changes in menu
object are therefore reflected in the UI.</p>
<p>Plugins should use new menu proxy located in <em>freeipa/menu</em> module for
performing modifications of menu. The main benefit of the proxy is that
plugins don’t have to care about knowing how to get an instance of the
menu object.</p>
<p>This proxy has following methods:</p>
<ul>
<li><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">add_item</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
<p>Add new menu item. Look into
<em>/install/ui/src/freeipa/navigation/Menu.js</em> for all available
properties of item spec.</p>
</li>
<li><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">remove_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
<p>Remove menu item, <em>item</em> is menu item object or menu item name.</p>
</li>
<li><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">query</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">search_options</span><span class="p">)</span>
</pre></div>
</div>
<p>Query menu store. Uses Dojo SimpleQueryEngine.</p>
</li>
<li><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get</span><span class="p">()</span>
</pre></div>
</div>
<p>Get instance of menu object for advanced use cases.</p>
</li>
</ul>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h2>
<section id="add-menu-item">
<span id="id1"></span><h3>Add menu item<a class="headerlink" href="#add-menu-item" title="Permalink to this heading">¶</a></h3>
<p>Example with specified dependencies and recommended phase.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">define</span><span class="p">([</span>
        <span class="s1">&#39;freeipa/menu&#39;</span><span class="p">,</span>
        <span class="s1">&#39;freeipa/phases&#39;</span>
       <span class="p">],</span>
       <span class="n">function</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span> <span class="n">phases</span><span class="p">)</span> <span class="p">{</span>

    <span class="n">var</span> <span class="n">add_item</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">check</span> <span class="k">for</span> <span class="n">module</span> <span class="n">enablement</span>

        <span class="o">//</span> <span class="n">add</span> <span class="n">new</span> <span class="n">item</span> <span class="n">into</span> <span class="n">identity</span> <span class="n">section</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">add_item</span><span class="p">({</span> <span class="n">entity</span><span class="p">:</span> <span class="s1">&#39;dhcp&#39;</span> <span class="p">},</span> <span class="s1">&#39;identity&#39;</span><span class="p">);</span>
        <span class="o">//</span> <span class="n">Note</span><span class="p">:</span> <span class="n">each</span> <span class="n">menu</span> <span class="n">item</span> <span class="n">has</span> <span class="n">a</span> <span class="n">name</span><span class="p">,</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">specified</span> <span class="ow">in</span> <span class="n">spec</span> <span class="n">it</span> <span class="ow">is</span>
        <span class="o">//</span> <span class="n">based</span> <span class="n">on</span> <span class="n">entity</span> <span class="n">name</span> <span class="ow">or</span> <span class="n">facet</span> <span class="n">name</span><span class="o">.</span> <span class="n">Each</span> <span class="n">name</span> <span class="n">contains</span> <span class="n">its</span> <span class="n">parent</span><span class="s1">&#39;s</span>
        <span class="o">//</span> <span class="n">name</span> <span class="k">as</span> <span class="n">a</span> <span class="n">prefix</span><span class="o">.</span> <span class="n">The</span> <span class="n">added</span> <span class="n">item</span><span class="s1">&#39;s name will be: &#39;</span><span class="n">identity</span><span class="o">/</span><span class="n">dhcp</span><span class="s1">&#39;</span>
    <span class="p">};</span>

    <span class="o">//</span> <span class="n">add</span> <span class="n">menu</span> <span class="n">item</span> <span class="n">after</span> <span class="n">default</span> <span class="n">menu</span> <span class="n">items</span> <span class="n">are</span> <span class="n">added</span>
    <span class="n">phase</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">&#39;profile&#39;</span><span class="p">,</span> <span class="n">add_item</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="remove-menu-item">
<span id="id2"></span><h3>Remove menu item<a class="headerlink" href="#remove-menu-item" title="Permalink to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">remove</span> <span class="n">previously</span> <span class="n">added</span> <span class="n">item</span>
<span class="n">menu</span><span class="o">.</span><span class="n">remove_item</span><span class="p">(</span><span class="s1">&#39;identity/dhcp&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="query">
<h3>Query<a class="headerlink" href="#query" title="Permalink to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">get</span> <span class="n">added</span> <span class="n">item</span>
<span class="n">var</span> <span class="n">item</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">get</span><span class="p">({</span><span class="n">name</span><span class="p">:</span> <span class="s1">&#39;identity/dhcp&#39;</span><span class="p">})[</span><span class="mi">0</span><span class="p">];</span>
</pre></div>
</div>
</section>
<section id="observing-menu-store">
<span id="id3"></span><h3>Observing menu store<a class="headerlink" href="#observing-menu-store" title="Permalink to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">m</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">get</span><span class="p">();</span> <span class="o">//</span> <span class="n">get</span> <span class="n">current</span> <span class="n">menu</span> <span class="n">instance</span>

<span class="o">//</span> <span class="n">observes</span> <span class="n">modifications</span> <span class="n">of</span> <span class="n">internal</span> <span class="n">menu</span> <span class="n">store</span>
<span class="n">var</span> <span class="n">handler</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">removedFrom</span><span class="p">,</span> <span class="n">insertedInto</span><span class="p">)</span> <span class="p">{};</span>
<span class="n">var</span> <span class="n">q</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">query</span><span class="p">();</span>
<span class="n">q</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">true</span><span class="p">);</span>

<span class="o">//</span> <span class="n">using</span> <span class="n">dojo</span><span class="o">/</span><span class="n">on</span>
<span class="o">//</span> <span class="n">invokes</span> <span class="n">select</span> <span class="n">handler</span> <span class="n">when</span> <span class="n">menu</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">selected</span> <span class="p">(</span><span class="nb">set</span> <span class="n">by</span> <span class="n">application</span> <span class="n">controller</span><span class="p">)</span>
<span class="n">var</span> <span class="n">select_hanler</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">select_state</span><span class="p">)</span> <span class="p">{};</span>
<span class="n">on</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;selected&#39;</span><span class="p">,</span> <span class="n">select_hanler</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="implementation">
<h1>Implementation<a class="headerlink" href="#implementation" title="Permalink to this heading">¶</a></h1>
<p>N/A</p>
</section>
<section id="feature-management">
<h1>Feature Management<a class="headerlink" href="#feature-management" title="Permalink to this heading">¶</a></h1>
<p>No visible UI changes.</p>
<p>No CLI changes.</p>
</section>
<section id="major-configuration-options-and-enablement">
<h1>Major configuration options and enablement<a class="headerlink" href="#major-configuration-options-and-enablement" title="Permalink to this heading">¶</a></h1>
<p>N/A</p>
</section>
<section id="replication">
<h1>Replication<a class="headerlink" href="#replication" title="Permalink to this heading">¶</a></h1>
<p>N/A</p>
</section>
<section id="updates-and-upgrades">
<h1>Updates and Upgrades<a class="headerlink" href="#updates-and-upgrades" title="Permalink to this heading">¶</a></h1>
<p>N/A</p>
</section>
<section id="dependencies">
<h1>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this heading">¶</a></h1>
<p>N/A</p>
</section>
<section id="external-impact">
<h1>External Impact<a class="headerlink" href="#external-impact" title="Permalink to this heading">¶</a></h1>
<p>N/A</p>
</section>
<section id="rfe-author">
<h1>RFE Author<a class="headerlink" href="#rfe-author" title="Permalink to this heading">¶</a></h1>
<p>pvoborni</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../_sources/archive/pages/V3/WebUI_extensible_navigation.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>