<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Python version &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="What’s in the sandbox" href="Quaid.html" />
    <link rel="prev" title="&lt;no title&gt;" href="Pviktorin.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <p>This page outlines standards for <a class="reference external" href="http://python.org/">Python</a> code
contributed to freeIPA v2 and beyond.</p>
<section id="python-version">
<span id="id1"></span><h1>Python version<a class="headerlink" href="#python-version" title="Permalink to this heading">¶</a></h1>
<p>In the FreeIPA master branch and branches &gt;= 3.0.0, we require at least
Python 2.7. This permits the use of set literals, dict and set
comprehensions, and <a class="reference external" href="https://docs.python.org/dev/whatsnew/2.7.html">many other
features</a>.</p>
</section>
<section id="python-coding-style">
<span id="id2"></span><h1>Python coding style<a class="headerlink" href="#python-coding-style" title="Permalink to this heading">¶</a></h1>
<p>Although Python’s syntax enforces quite a lot of stylistic consistency,
there is still much wiggle room, so a style guide will help keep us
productive and happy.</p>
<p>Fortunately, thanks to the “Benevolent Dictator For Life” (Guido van
Rossum, the author of Python), there is only one coding style for
Python, which is defined in PEP-8 and PEP-257:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.python.org/dev/peps/pep-0008">PEP 8: Style Guide for Python
Code</a></p></li>
<li><p><a class="reference external" href="http://www.python.org/dev/peps/pep-0257">PEP 257: Docstring
Conventions</a></p></li>
</ul>
</section>
<section id="python-unit-testing">
<span id="id3"></span><h1>Python unit testing<a class="headerlink" href="#python-unit-testing" title="Permalink to this heading">¶</a></h1>
<p>All the Python unit testing is being done using <em>nose</em>:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://somethingaboutorange.com/mrl/projects/nose/">nose: a discovery-based unittest
extension</a></p></li>
</ul>
<p>nose was chosen because it allows unit tests to be written very quickly
and in a quite natural and flexible manner.</p>
<p>All the unit tests should be located in the <code class="docutils literal notranslate"><span class="pre">tests/</span></code> directory in the
source tree.</p>
</section>
<section id="python-api-documentation">
<span id="id4"></span><h1>Python API documentation<a class="headerlink" href="#python-api-documentation" title="Permalink to this heading">¶</a></h1>
<p>We are generating API documentation using the <em>Epydoc</em> tool:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://epydoc.sourceforge.net">Epydoc: Automatic API Documentation Generation for
Python</a></p></li>
</ul>
<p>The Epydoc generated documentation is an excellent way to learn the v2
code base, particularly because all the cross-references are
hyper-linked. Up-to-date documentation is always available on
freeipa.org:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://freeipa.org/developer-docs/">freeIPA Python API
documentation</a></p></li>
<li><p><a class="reference external" href="http://freeipa.org/developer-docs/ipalib-module.html">Tutorial for Plugin
Authors</a></p></li>
</ul>
</section>
<section id="python-internationalized-i18n-strings">
<span id="id5"></span><h1>Python Internationalized (i18n) Strings<a class="headerlink" href="#python-internationalized-i18n-strings" title="Permalink to this heading">¶</a></h1>
<p>If the string will be internationalized (e.g. is marked with _()) and
it has more than one format substitution you <strong>MUST</strong> use <em>named</em> format
specifiers, not positional format specifiers.</p>
<p>Here is an example of incorrect usage with positional substitution:</p>
<p>`` _(‘item %s has %s value’) % (name, value)``</p>
<p>Here is the correct usage using named substitution:</p>
<p>`` _(‘item %(name)s has %(value)s value’) % {‘name’:name, ‘value’:value}``</p>
<p>-or-</p>
<p>`` _(‘item %(name)s has %(value)s value’) % dict(name=name, value=value}``</p>
<p>Why does this matter? Word ordering is locale dependent. Translators
need the flexibility to reorder the words in the string. If you use
positional format substitutions the translator can’t reorder the
wording. However, if you use named format substitutions the translator
has the freedom to reorder the wording. Try to pick names for the for
format specifiers which will provide hints to the translator as to
meaning of the substitution.</p>
</section>
<section id="python-docstrings">
<span id="id6"></span><h1>Python docstrings<a class="headerlink" href="#python-docstrings" title="Permalink to this heading">¶</a></h1>
<p>We are using <em>reStructuredText</em> markup in the docstrings, which you can
read about here:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText: Markup Syntax and Parser Component of
Docutils</a></p></li>
</ul>
<p>There is considerable example code included in the docstrings. All these
examples are automatically tested using the Python doctest module:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://docs.python.org/library/doctest.html">doctest: Test interactive Python
examples</a></p></li>
</ul>
<p>We are relying on nose to automatically discover all the code examples
and then to test them with doctest. This is done using the
<code class="docutils literal notranslate"><span class="pre">--with-doctest</span></code> option, like this:</p>
<p><code class="docutils literal notranslate"><span class="pre">nosetests --with-doctest</span></code></p>
</section>
<section id="unused-dummy-variables">
<span id="id7"></span><h1>Unused (dummy) variables<a class="headerlink" href="#unused-dummy-variables" title="Permalink to this heading">¶</a></h1>
<p>We want to avoid unused variables in code as much as possible. In case
you need to use a variable that has no further use (iteration, tuple
unpacking) then this variable must start with an underscore character
(‘_’). The Pylint check for unused variables has been enabled and such
dummy variables must match the regular expression ‘_.+’ otherwise they
are reported as errors.</p>
<p>Example:</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">name, _weight, age = human['John']</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">print(name, age)</span></code></div>
</div>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/archive/pages/Python_Coding_Style.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>