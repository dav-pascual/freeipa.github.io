<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>The use of sssd &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="The Web UI Component" href="Web_UI.html" />
    <link rel="prev" title="WebUI 2.1" href="WebUI-2-1.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <p>The typical web applications nowadays use HTTP
<a class="reference external" href="http://en.wikipedia.org/wiki/HTTP_cookie">cookie</a>-based
authentication sessions, usually with login-form to enter login and
password pair which is then validated by the application against some
internal user database. Session record is then created and cookie set,
which the browser will send with each subsequent request to the
application. The application can then show data related to the
authenticated user (shopping cart content, user’s posts, stored files)
throughout their work with the application.</p>
<p>In large organizations and enterprise deployments, user identities are
usually managed in some central manner. Many programming languages and
frameworks provide libraries/modules to authenticate for example against
<a class="reference external" href="http://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol">LDAP</a>
sources. However, when the full complexity of enterprise setups is
considered, including
<a class="reference external" href="http://en.wikipedia.org/wiki/Kerberos_%28protocol%29">Kerberos</a>
authentication, <a class="reference external" href="http://en.wikipedia.org/wiki/Failover">failovers</a>,
use of <a class="reference external" href="http://en.wikipedia.org/wiki/Active_Directory">Active
Directory</a>, and
identity federation, it can be useful to offload the authentication
support to solution independent on the application code or framework –
<a class="reference external" href="http://en.wikipedia.org/wiki/Apache_HTTP_Server">Apache</a> modules,
and where needed, <a class="reference external" href="https://fedorahosted.org/sssd/">System Security Services Daemon
(sssd)</a>.</p>
<p>With fairly minimal changes, web applications can consume the results of
authentication performed by Apache modules, using the standard
REMOTE_USER environment variable/attribute/method. If applications know
how to handle the authentication result coming from the underlying
(front end) web server, it is then just a matter of configuration of the
web server to add access control to Kerberos authentication, federated
authentication via SAML, or use central identity management server like
FreeIPA to authenticate [login, password] values submitted by user to
application’s native logon-form.</p>
<p>If the application is then extended to understand <a class="reference external" href="Environment_Variables#Proposed_Additional_Variables">additional proposed
environment
variables</a>, it
can receive not just the authentication and authorization result but
also additional information about the user, for example email address or
full name, typically needed by application to provide the full
functionality and good user experience. With group membership
information available to the application, the application can base its
application-specific roles/access rights/authorization for the user
based on the external user information, again without having to add
support for all of them in the application or framework code directly.</p>
<p>There is an <a class="reference external" href="Web_App_Authentication/Example_setup">example setup</a>
accompanying this page which demonstrates the concepts described below
on a trivial CGI application.</p>
<p>We do not expect applications to drop their existing functionality that
served them well, this is merely an additional possibility.</p>
<section id="the-use-of-sssd">
<span id="id1"></span><h1>The use of sssd<a class="headerlink" href="#the-use-of-sssd" title="Permalink to this heading">¶</a></h1>
<p>The <a class="reference external" href="https://fedorahosted.org/sssd/">System Security Services Daemon
(sssd)</a> is present as a standard part
of the latest Red Hat Enterprise Linux, Fedora, and related
distributions. It provides access to identity and authentication
services and is primarily aimed at the operating system level. In this
document, we will explore ways to use it for authentication and identity
access of web applications, while preserving the distinction of the
operating system and web application deployed on it.</p>
<p>We will assume that the system on which the web application is deployed
is IPA-enrolled. Using the command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ipa</span><span class="o">-</span><span class="n">client</span><span class="o">-</span><span class="n">install</span>
</pre></div>
</div>
<p>the local configuration of a couple of subsystems including sssd can be
set up to point to a FreeIPA server. It also creates a host record on
the server, making it possible to add services and get their Kerberos
keytab.</p>
<p>Services are important because they make it possible to have
fine-grained control over a user’s access to the system. We might want
to give a network administrator ssh access to the machine, but not
access to the accounting system running on it. We might want to allow
employees in the finance department to be able to access the accounting
web application, but not ssh access to the underlying host.</p>
</section>
<section id="kerberos">
<h1>Kerberos<a class="headerlink" href="#kerberos" title="Permalink to this heading">¶</a></h1>
<p>All contemporary web browsers support SPNEGO and Kerberos. When
accessing <a class="reference external" href="http://server.example.com/">http://server.example.com/</a> or <a class="reference external" href="https://server.example.com/">https://server.example.com/</a>, the
server can propose <strong>Negotiate</strong> authentication method. If the user
currently has ticket granted ticket (obtained for example via <code class="docutils literal notranslate"><span class="pre">kinit</span></code>
command), the brower will obtain Kerberos tickets for principal
<a class="reference external" href="mailto:HTTP/server&#46;example&#46;com&#37;&#52;&#48;EXAMPLE&#46;COM">HTTP/server<span>&#46;</span>example<span>&#46;</span>com<span>&#64;</span>EXAMPLE<span>&#46;</span>COM</a> (as opposed to ssh which uses
<a class="reference external" href="mailto:host/server&#46;example&#46;com&#37;&#52;&#48;EXAMPLE&#46;COM">host/server<span>&#46;</span>example<span>&#46;</span>com<span>&#64;</span>EXAMPLE<span>&#46;</span>COM</a>) and use related GSSAPI data to
authenticate to the server.</p>
<p>To enable this method on typical Apache installation,
<strong>mod_auth_gssapi</strong> or <strong>mod_auth_kerb</strong> module needs to be <a class="reference external" href="Web_App_Authentication/Example_setup#Kerberos">installed
and configured</a>.</p>
</section>
<section id="application-change-remote-user">
<span id="id2"></span><h1>Application change: REMOTE_USER<a class="headerlink" href="#application-change-remote-user" title="Permalink to this heading">¶</a></h1>
<p>The application then needs to be able to retrieve the result of the
authentication, the login (principal) of the authenticated user. The
standard mechanism for CGI deployments is via REMOTE_USER environment
variable, and almost every web framework has a way to get this value
from the web server, either via environment variable, attribute, or
dedicated method call. (It’s the same value and mechanism used for the
HTTP Basic Authentication.)</p>
<p>The application not only needs to retrieve the value but its processing
flow needs to be modified to trust this value. Note that this variable
will not be set unless the admin deploying and setting up the
application configured the underlying Apache correctly. For application
developers it might be a step from having complete control over the
internal user database to more uncertainty, having to trust that the
external value is correct.</p>
<p>Furthermore, many applications will need to have record for any
authenticated user in its internal database, even for the externally
(Kerberos) authenticated ones, for foreign keys to work. That is fine –
the first time the application sees REMOTE_USER set to value it does not
have in the database, it can create the user record in its internal
database on the fly. That way, even if it uses object-relational
mapping, the application will still work. (See below if the application
requires that the user record has certain attributes besides login NOT
NULL.)</p>
</section>
<section id="other-authentication-modules">
<span id="id3"></span><h1>Other authentication modules<a class="headerlink" href="#other-authentication-modules" title="Permalink to this heading">¶</a></h1>
<p>Besides Kerberos (with mod_auth_gssapi or mod_auth_kerb), there are
other mechanisms that can be configured in Apache to authenticate:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Authentication Method</p></th>
<th class="head"><p>Apache Authentication Module</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Pure Application Level</p></td>
<td><p><em>None</em></p></td>
</tr>
<tr class="row-odd"><td><p>Kerberos Single Sign-On (ticket)</p></td>
<td><p>mod_auth_gssapi</p></td>
</tr>
<tr class="row-even"><td><p>mod_auth_kerb</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>SAML-based</p></td>
<td><p>mod_auth_mellon</p></td>
</tr>
<tr class="row-even"><td><p>Certificate-based</p></td>
<td><p>mod_nss</p></td>
</tr>
<tr class="row-odd"><td><p>mod_ssl</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="host-and-service-based-access-control">
<span id="id4"></span><h1>Host and service based access control<a class="headerlink" href="#host-and-service-based-access-control" title="Permalink to this heading">¶</a></h1>
<p>If mod_auth_gssapi/mod_auth_kerb is configured and application extended
to consult and trust the REMOTE_USER value, it may have a potentially
unwanted side effect – any user who is able to get the Kerberos ticket
for <a class="reference external" href="mailto:HTTP/server&#46;example&#46;com&#37;&#52;&#48;EXAMPLE&#46;COM">HTTP/server<span>&#46;</span>example<span>&#46;</span>com<span>&#64;</span>EXAMPLE<span>&#46;</span>COM</a> would then be able to log into
the application. If the application is only intended for small set of
users and if any successful external authentication will populate user
record in application’s database, that will pollute the database with
users who have no access rights in the application yet manage to come
across its URL and get authenticated.</p>
<p>A possible solution is to apply access control check to the Kerberos
authentication method on the Apache level. That way, even if the user is
able to get the Kerberos ticket the authentication will still fail. For
this to work, we will use Apache module <strong>mod_authnz_pam</strong>, configure
PAM service to use pam_sss.so, hooking it via sssd to the FreeIPA
server, and set up host-based access control (HBAC) rule in FreeIPA to
separate service, to only give access to a particular set or group of
users.</p>
<section id="hbac-rules">
<span id="id5"></span><h2>HBAC rules<a class="headerlink" href="#hbac-rules" title="Permalink to this heading">¶</a></h2>
<p>We will start from the end – from the FreeIPA HBAC service. It is just
a string which distinguishes one service from another. Running</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ipa</span> <span class="n">hbacsvc</span><span class="o">-</span><span class="n">find</span>
</pre></div>
</div>
<p>will show pre-created services like ssh, kdm, login, or kdm. Their names
are then used to define the respective PAM service on the client – so
for ssh, the configuration is in /etc/pam.d/ssh. If we are adding
service for a reporting web application in our organization, we can name
it <strong>reporting</strong> or <strong>reporting.example.com</strong> or <strong>reporting-prod</strong> and
<strong>reporting-qa</strong> if we have multiple environments. Please consult help
pages</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ipa</span> <span class="n">help</span> <span class="n">hbacsvc</span>
<span class="n">ipa</span> <span class="n">help</span> <span class="n">hbacrule</span>
<span class="n">ipa</span> <span class="n">help</span> <span class="n">hbactest</span>
</pre></div>
</div>
<p>for detailed description of creating HBAC services and rules in FreeIPA.
Please also note that you will probably need to <a class="reference external" href="Howto/HBAC_and_allow_all">disable the default
allow_all HBAC rule</a> for the mechanism to
work properly.</p>
</section>
<section id="pam-service">
<span id="id6"></span><h2>PAM service<a class="headerlink" href="#pam-service" title="Permalink to this heading">¶</a></h2>
<p>On the IPA-enrolled machine on which the web application is being
configured, we need to define the PAM service to use sssd. We create
file named the same as the HBAC service we’ve created with
<code class="docutils literal notranslate"><span class="pre">ipa</span> <span class="pre">hbacsvc-add</span></code> and configure <code class="docutils literal notranslate"><span class="pre">pam_sss.so</span></code> for both auth and
account. For example, if the HBAC service is <strong>reporting-prod</strong>, we will
need file <strong>/etc/pam.d/reporting-prod</strong> with content</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auth</span>    <span class="n">required</span>   <span class="n">pam_sss</span><span class="o">.</span><span class="n">so</span>
<span class="n">account</span> <span class="n">required</span>   <span class="n">pam_sss</span><span class="o">.</span><span class="n">so</span>
</pre></div>
</div>
</section>
<section id="mod-authnz-pam">
<h2>mod_authnz_pam<a class="headerlink" href="#mod-authnz-pam" title="Permalink to this heading">¶</a></h2>
<p>The module <strong>mod_authnz_pam</strong> adds access control checks to
authentication phase of HTTP request processing in Apache. The typical
mod_auth_gssapi/mod_auth_kerb configuration will have</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">require</span> <span class="n">valid</span><span class="o">-</span><span class="n">user</span>
</pre></div>
</div>
<p>in it, saying that any authenticated user should be allowed. When we
change it to <code class="docutils literal notranslate"><span class="pre">require</span> <span class="pre">pam-account</span> <span class="pre">PAM-service</span></code>, the user will only be
authenticated by Apache if it matches the <code class="docutils literal notranslate"><span class="pre">account</span></code> check in PAM,
which in case of <code class="docutils literal notranslate"><span class="pre">pam_sss.so</span></code> and sssd being configured to consult
FreeIPA will lead to HBAC rule check, with the PAM service name used as
the HBAC service. For our <strong>reporting-prod</strong> example, the
<code class="docutils literal notranslate"><span class="pre">require</span> <span class="pre">valid-user</span></code> will change to</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">require</span> <span class="n">pam</span><span class="o">-</span><span class="n">account</span> <span class="n">reporting</span><span class="o">-</span><span class="n">prod</span>
</pre></div>
</div>
<p>We can even used different PAM services for different parts of the
application, provided they can be identified using URLs. If the
application has a special admin section, we can define separate PAM
service (which possibly more strict rules) for this part:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Location</span> <span class="o">/</span><span class="n">app</span><span class="o">&gt;</span>
<span class="n">require</span> <span class="n">pam</span><span class="o">-</span><span class="n">account</span> <span class="n">reporting</span><span class="o">-</span><span class="n">prod</span>
<span class="o">&lt;/</span><span class="n">Location</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">Location</span> <span class="o">/</span><span class="n">app</span><span class="o">/</span><span class="n">admin</span><span class="o">&gt;</span>
<span class="n">require</span> <span class="n">pam</span><span class="o">-</span><span class="n">account</span> <span class="n">reporting</span><span class="o">-</span><span class="n">prod</span><span class="o">-</span><span class="n">admin</span>
<span class="o">&lt;/</span><span class="n">Location</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>The <strong>mod_authnz_pam</strong> module can be configured with any other module
which uses the <code class="docutils literal notranslate"><span class="pre">require</span></code> Apache directive. The deployment matrix then
changes to:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Authentication Method</p></th>
<th class="head"><p>Apache Modules</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Authentication</p></td>
<td><p>Access Control</p></td>
</tr>
<tr class="row-odd"><td><p>Pure Application Level</p></td>
<td><p><em>None</em></p></td>
</tr>
<tr class="row-even"><td><p>Kerberos Single Sign-On (ticket)</p></td>
<td><p>mod_auth_gssapi</p></td>
</tr>
<tr class="row-odd"><td><p>mod_auth_kerb</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>SAML-based</p></td>
<td><p>mod_auth_mellon</p></td>
</tr>
<tr class="row-odd"><td><p>Certificate-based</p></td>
<td><p>mod_nss</p></td>
</tr>
<tr class="row-even"><td><p>mod_ssl</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td></td>
</tr>
</tbody>
</table>
<p>Please consult the <a class="reference external" href="Web_App_Authentication/Example_setup#Host_.28and_service.29_based_access_control_for_Kerberos">example setup
page</a>
for detailed configuration steps.</p>
</section>
</section>
<section id="login-form-using-freeipa">
<span id="id7"></span><h1>Login form using FreeIPA<a class="headerlink" href="#login-form-using-freeipa" title="Permalink to this heading">¶</a></h1>
<p>In many situations, neither Kerberos nor any other authentication method
which requires some additional setup on client’s side (like
certificates) can be used or mandated, for practical reasons. Still, if
the organization has a central user management in the form of FreeIPA,
it can connect its existing applications to the FreeIPA authentication
service, while retaining the application-specific look and feel of its
login form. All that it takes for application is to understand the
REMOTE_USER result of Apache authentication modules.</p>
<p>The central authentication is achieved using the HBAC and PAM service
described above, and Apache module <strong>mod_intercept_form_submit</strong>. The
module can be configured to look at HTTP POST request resulting from
user submitting application’s login form, and if login and password are
found in the request, it will run PAM authentication and access control
checks, using service specified with <code class="docutils literal notranslate"><span class="pre">InterceptFormPAMService</span></code>
directive. The module internally calls mod_authnz_pam. When the service
is properly configured to use <code class="docutils literal notranslate"><span class="pre">pam_sss.so</span></code> and sssd is configured to
use FreeIPA, this form submit interception will validate the
login/password pair, plus do the access control check like in the setup
with Kerberos, described above.</p>
<p>The successful result of this authentication is again passed using the
REMOTE_USER mechanism. If application consults this value and trusts it,
it will consider the user authenticated without checking its local user
database.</p>
<p>The failed authentication result is signalled to the application via
environment variable EXTERNAL_AUTH_ERROR and applications are welcome to
use this result indication.</p>
<p>The proposed mix of authentication setups expands to</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Authentication Method</p></th>
<th class="head"><p>Apache Modules</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Authentication</p></td>
<td><p>Access Control</p></td>
</tr>
<tr class="row-odd"><td><p>Pure Application Level</p></td>
<td><p><em>None</em></p></td>
</tr>
<tr class="row-even"><td><p>Kerberos Single Sign-On (ticket)</p></td>
<td><p>mod_auth_gssapi</p></td>
</tr>
<tr class="row-odd"><td><p>mod_auth_kerb</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>SAML-based</p></td>
<td><p>mod_auth_mellon</p></td>
</tr>
<tr class="row-odd"><td><p>Certificate-based</p></td>
<td><p>mod_nss</p></td>
</tr>
<tr class="row-even"><td><p>mod_ssl</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Login form-based</p></td>
<td><p>mod_intercept_form_submit</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td></td>
</tr>
</tbody>
</table>
<p>The <a class="reference external" href="Web_App_Authentication/Example_setup#External_identities_for_login_form">example setup
page</a>
has more details about the configuration.</p>
</section>
<section id="additional-user-information">
<span id="id8"></span><h1>Additional user information<a class="headerlink" href="#additional-user-information" title="Permalink to this heading">¶</a></h1>
<p>The FreeIPA server can not only store plain login identities and
passwords for authentication services, it can also hold additional user
attributes like email addresses, phone numbers, or full names of users,
as well as group membership. The sssd is then able to access this
information and make it available to applications via new <strong>sssd-dbus</strong>
package.</p>
<p>Using Apache module <strong>mod_lookup_identity</strong> which can talk to sssd’s ifp
service over dbus, any Apache module’s authenticated user can have
additional environment variables populated from the central identity
provider like FreeIPA. This can be used if the application requires that
additional attributes are filled before storing the user in its internal
database, or simply if the application makes use of such data. On the
sssd side, the list of LDAP attributes that need to be retrieved and
cached is specified, and then in mod_lookup_identity’s configuration,
these attributes are mapped to environment variables.</p>
<p>One type of data that the sssd-dbus calls provides is user’s group
membership. This can be used to populate application-specific roles of
the externally-authenticated user. Consider a situation when a newly
hired network administrator is added to group <strong>netadmin</strong> in
organization’s FreeIPA server. Module mod_lookup_identity is able to
retrieve this group name and populate environment variable like
REMOTE_USER_GROUP_N, REMOTE_USER_GROUP_1, …, or REMOTE_USER_GROUPS as
colon-separated list. System management and provisioning application can
hold internal mapping of the external group <strong>netadmin</strong> to its internal
role and access control handling, making such a user automatically have
appropriate privileges.</p>
<p>When using the attributes to populate the database with
externally-authenticated users, it is good to consider the case when
user’s details or group membership in the central identity provider
change. It might be useful to not only populate the user record when it
is not found in application’s database the first time the user
authenticates, but also compare and update the information every time
the user authenticates, if needed. This is especially important if group
membership is linked to application’s role handling.</p>
<p>Populating of additional attributes, mapping of groups to roles, and
update of this information in application’s database are therefore
additional changes that the web application developers might consider
adding to their application to make deployment of their application
easier in large enterprise environment, without getting necessarily deep
into the details of each possible identity provider which the
organizations might use. The applications only need to assume that the
environment variables (or whatever is the method of handling this
information in its programming language or framework) might be populated
by the HTTP daemon setup and its modules.</p>
<p>It is also our hope that other modules that might have the additional
user attributes available (like SAML) might populate the <a class="reference external" href="Environment_Variables#Proposed_Additional_Variables">proposed
environment
variables</a>
directly, so even if the web application deployment does not use neither
FreeIPA, sssd, nor any of the Apache modules mentioned on this page,
effort that went into modifications of web applications can still be
used.</p>
<p>The <a class="reference external" href="Web_App_Authentication/Example_setup#Storing_external_users_in_internal_databases">example setup
page</a>
describes the sssd-dbus and mod_lookup_identity setup in more detail.</p>
<p>The whole proposed solution for web application authentication using
sssd:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Authentication Method</p></th>
<th class="head"><p>Apache Modules</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Authentication</p></td>
<td><p>Access Control</p></td>
</tr>
<tr class="row-odd"><td><p>Pure Application Level</p></td>
<td><p><em>None</em></p></td>
</tr>
<tr class="row-even"><td><p>Kerberos Single Sign-On (ticket)</p></td>
<td><p>mod_auth_gssapi</p></td>
</tr>
<tr class="row-odd"><td><p>mod_auth_kerb</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>SAML-based</p></td>
<td><p>mod_auth_mellon</p></td>
</tr>
<tr class="row-odd"><td><p>Certificate-based</p></td>
<td><p>mod_nss</p></td>
</tr>
<tr class="row-even"><td><p>mod_ssl</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Login form-based</p></td>
<td><p>mod_intercept_form_submit</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td></td>
</tr>
</tbody>
</table>
<p>Note: sssd call also be configured to use different identity providers
than FreeIPA but such setup is beyond the scope of this overview.</p>
</section>
<section id="namespace-separation">
<span id="id9"></span><h1>Namespace Separation<a class="headerlink" href="#namespace-separation" title="Permalink to this heading">¶</a></h1>
<p>In the above description we have assumed that the admin wants to handle
all their application users with external authentication and that the
set of user identities (locally created/managed and the
externally-authenticated) overlap. Depending on the use case this might
or might not be desirable. Consult <a class="reference external" href="Web_App_Authentication/Namespace_separation">Namespace
separation</a> for possible
setups with externally-authenticated users marked with &#64;REALM and
multiple IPA server setups.</p>
</section>
<section id="saml">
<h1>SAML<a class="headerlink" href="#saml" title="Permalink to this heading">¶</a></h1>
<p>As mentioned above, when the Web application / framework is amended to
be able to process REMOTE_USER and <a href="#id19"><span class="problematic" id="id20">REMOTE_USER_GROUP_</span></a>* environment
variables, it’s then just a matter of configuration of the front-end
server to enable a particular mechanism of external authentication. For
example, for SAML (Security Assertion Markup Language),
<a class="reference external" href="https://github.com/UNINETT/mod_auth_mellon">mod_auth_mellon</a> can be
used and starting with version 0.11.0, it can be configured to populate
environment variables exactly like mod_lookup_identity does:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MellonSetEnvNoPrefix</span> <span class="s2">&quot;REMOTE_USER_GROUP&quot;</span> <span class="s2">&quot;groups&quot;</span>
<span class="n">MellonEnvVarsIndexStart</span> <span class="mi">1</span>
<span class="n">MellonEnvVarsSetCount</span> <span class="n">On</span>
</pre></div>
</div>
<p>and we can pass other attributes as well:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MellonSetEnvNoPrefix</span> <span class="s2">&quot;REMOTE_USER_LASTNAME&quot;</span> <span class="s2">&quot;surname&quot;</span>
<span class="n">MellonSetEnvNoPrefix</span> <span class="s2">&quot;REMOTE_USER_FIRSTNAME&quot;</span> <span class="s2">&quot;givenname&quot;</span>
<span class="n">MellonSetEnvNoPrefix</span> <span class="s2">&quot;REMOTE_USER_EMAIL&quot;</span> <span class="s2">&quot;email&quot;</span>
</pre></div>
</div>
</section>
<section id="references">
<h1>References<a class="headerlink" href="#references" title="Permalink to this heading">¶</a></h1>
<section id="openstack">
<h2>OpenStack<a class="headerlink" href="#openstack" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Nathan Kinder’s <a class="reference external" href="https://blog-nkinder.rhcloud.com/?p=130">https://blog-nkinder.rhcloud.com/?p=130</a></p></li>
<li><p>Adam Young’s <a class="reference external" href="http://adam.younglogic.com/2015/03/key-fed-lookup-redux/">http://adam.younglogic.com/2015/03/key-fed-lookup-redux/</a></p></li>
</ul>
</section>
<section id="spacewalk">
<h2>Spacewalk<a class="headerlink" href="#spacewalk" title="Permalink to this heading">¶</a></h2>
<p>In Spacewalk 2.1, it is possible to use both the Kerberos
authentication, and the form-based PAM authentication, including the
HBAC management from FreeIPA and mapping of group membership from the
identity provider to Spacewalk roles (access rights) – see
<a class="reference external" href="https://fedorahosted.org/spacewalk/wiki/SpacewalkAndIPA">https://fedorahosted.org/spacewalk/wiki/SpacewalkAndIPA</a> for full
documentation of the feature.</p>
</section>
<section id="satellite">
<h2>Satellite<a class="headerlink" href="#satellite" title="Permalink to this heading">¶</a></h2>
<p>Based on Spacewalk upstream, the capability is now also available in
Satellite 5.7 and documented in the <a class="reference external" href="https://access.redhat.com/documentation/en-US/Red_Hat_Satellite/5.7/html/Installation_Guide/ch06s02.html">Using Identity Management for
Authentication</a>
chapter of the Installation Guide.</p>
</section>
<section id="foreman">
<h2>Foreman<a class="headerlink" href="#foreman" title="Permalink to this heading">¶</a></h2>
<p>In Foreman 1.5, the external authentication is fully implemented as
described on this page – see the <a class="reference external" href="http://projects.theforeman.org/issues/5031">tracking
issue</a> with links to
individual issues and pull requests that introduced the feature. It is
now documented in <a class="reference external" href="http://theforeman.org/manuals/1.6/index.html#5.7ExternalAuthentication">Foreman
manual</a>.</p>
</section>
<section id="satellite-6">
<span id="id10"></span><h2>Satellite 6<a class="headerlink" href="#satellite-6" title="Permalink to this heading">¶</a></h2>
<p>Based on Foreman upstream, the capability is now also available in
Satellite 6.0:
<a class="reference external" href="https://access.redhat.com/documentation/en-US/Red_Hat_Satellite/6.1/html/User_Guide/sect-Using-IdM-for-Authentication.html">https://access.redhat.com/documentation/en-US/Red_Hat_Satellite/6.1/html/User_Guide/sect-Using-IdM-for-Authentication.html</a></p>
</section>
<section id="manageiq">
<h2>ManageIQ<a class="headerlink" href="#manageiq" title="Permalink to this heading">¶</a></h2>
<p>The support for external authentication is now in manageiq master:
<a class="reference external" href="https://github.com/ManageIQ/manageiq/commit/e0423c18d48380ff8d490ccb08291d2098fde69f">https://github.com/ManageIQ/manageiq/commit/e0423c18d48380ff8d490ccb08291d2098fde69f</a>.
The feature is configured by the console:
<a class="reference external" href="https://github.com/ManageIQ/manageiq/commit/cc6ea8b103a23bee5af8f9d88eac3024fc26cf18">https://github.com/ManageIQ/manageiq/commit/cc6ea8b103a23bee5af8f9d88eac3024fc26cf18</a>,
or manually:
<a class="reference external" href="https://github.com/ManageIQ/guides/blob/master/external_auth.md">https://github.com/ManageIQ/guides/blob/master/external_auth.md</a> and
<a class="reference external" href="https://github.com/ManageIQ/guides/blob/master/external_auth/configuration.md">https://github.com/ManageIQ/guides/blob/master/external_auth/configuration.md</a>.</p>
</section>
<section id="cloudforms">
<h2>CloudForms<a class="headerlink" href="#cloudforms" title="Permalink to this heading">¶</a></h2>
<p>Based on the ManageIQ upstream, the capability is now also available in
CFME 5.3 and documented in the
<a class="reference external" href="https://access.redhat.com/documentation/en-US/Red_Hat_CloudForms/3.1/html/Management_Engine_5.3_Settings_and_Operations_Guide/chap-Configuration.html">Configuration</a>
chapter of the Settings and Operations Guide.</p>
</section>
<section id="opendaylight">
<h2>OpenDayLight<a class="headerlink" href="#opendaylight" title="Permalink to this heading">¶</a></h2>
<p><a class="reference external" href="https://jdennis.fedorapeople.org/doc/sssd_configuration.pdf">Federated Authentication Utilizing Apache &amp;
SSSD</a> by
John Dennis.</p>
</section>
</section>
<section id="videos">
<h1>Videos<a class="headerlink" href="#videos" title="Permalink to this heading">¶</a></h1>
<section id="using-os-level-identity-authentication-and-access-control-for-web-applications">
<span id="id11"></span><h2>Using OS-level identity, authentication, and access control for Web applications<a class="headerlink" href="#using-os-level-identity-authentication-and-access-control-for-web-applications" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="http://www.adelton.com/docs/idm/os-auth-stack-for-web-applications">Presentation at DevConf
2015</a>
<a class="reference external" href="https://www.youtube.com/watch?v=Hhy5__C-XFc">https://www.youtube.com/watch?v=Hhy5__C-XFc</a>
{{#ev:youtube|Hhy5__C-XFc}}
Sadly, the first five minutes of the video are without sound.</p></li>
</ul>
</section>
<section id="identity-management-in-red-hat-enterprise-linux-web-application-authentication-series">
<span id="id12"></span><h2>Identity management in Red Hat Enterprise Linux: Web Application Authentication Series<a class="headerlink" href="#identity-management-in-red-hat-enterprise-linux-web-application-authentication-series" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Part I: Current standard: logon forms and cookie-based sessions
<a class="reference external" href="https://www.youtube.com/watch?v=Qdv8waOk6UE">https://www.youtube.com/watch?v=Qdv8waOk6UE</a>
{{#ev:youtube|Qdv8waOk6UE}}</p></li>
<li><p>Part II: Kerberos single sign-on
<a class="reference external" href="https://www.youtube.com/watch?v=_We4O8OuJAY">https://www.youtube.com/watch?v=_We4O8OuJAY</a>
{{#ev:youtube|_We4O8OuJAY}}</p></li>
<li><p>Part III: Additional services of central identity provider
<a class="reference external" href="https://www.youtube.com/watch?v=uG1rxZ4ydUE">https://www.youtube.com/watch?v=uG1rxZ4ydUE</a>
{{#ev:youtube|uG1rxZ4ydUE}}</p></li>
</ul>
</section>
<section id="django">
<h2>Django<a class="headerlink" href="#django" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>External Authentication for Django Projects
<a class="reference external" href="https://www.youtube.com/watch?v=62_jD-8zV4M">https://www.youtube.com/watch?v=62_jD-8zV4M</a>
{{#ev:youtube|62_jD-8zV4M}}</p></li>
</ul>
</section>
<section id="foreman-demo">
<span id="id13"></span><h2>Foreman demo<a class="headerlink" href="#foreman-demo" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>External authentication with and installer improvements, presented by
Marek Hulán
<a class="reference external" href="https://www.youtube.com/watch?v=S-8PESGbOUk#t=475">https://www.youtube.com/watch?v=S-8PESGbOUk#t=475</a>
{{#ev:youtube|S-8PESGbOUk|||||#t=475}}</p></li>
</ul>
</section>
</section>
<section id="presentations">
<h1>Presentations<a class="headerlink" href="#presentations" title="Permalink to this heading">¶</a></h1>
<section id="external-and-federated-identities-on-the-web">
<span id="id14"></span><h2>External and Federated Identities on the Web<a class="headerlink" href="#external-and-federated-identities-on-the-web" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="http://www.adelton.com/docs/idm/external-and-federated-identities">ApacheCon Core Europe 2015
presentation</a>
(also as <a class="reference external" href="http://www.adelton.com/docs/idm/external-and-federated-identities.pdf">PDF
slides</a>)</p></li>
</ul>
</section>
<section id="using-os-level-identity-authentication-and-access-control-for-web-applications-1">
<span id="id15"></span><h2>Using OS-level identity, authentication, and access control for Web applications<a class="headerlink" href="#using-os-level-identity-authentication-and-access-control-for-web-applications-1" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="http://www.adelton.com/docs/idm/os-auth-stack-for-web-applications">Developer Conference 2015
presentation</a>
(also as <a class="reference external" href="http://www.adelton.com/docs/idm/os-auth-stack-for-web-applications.pdf">PDF
slides</a>)</p></li>
</ul>
</section>
<section id="external-identity-and-authentication-providers-for-apache-http-server">
<span id="id16"></span><h2>External Identity and Authentication Providers For Apache HTTP Server<a class="headerlink" href="#external-identity-and-authentication-providers-for-apache-http-server" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="http://www.adelton.com/docs/idm/apache-external-idm-auth">ApacheCon Europe 2014
presentation</a>
(also as <a class="reference external" href="http://www.adelton.com/docs/idm/apache-external-idm-auth.pdf">PDF
slides</a>)</p></li>
</ul>
</section>
<section id="identity-management-scaling-out-and-up">
<span id="id17"></span><h2>Identity Management Scaling Out and Up<a class="headerlink" href="#identity-management-scaling-out-and-up" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="http://www.adelton.com/docs/idm/idm-scaling-out-and-up">LinuxCon Europe 2014
presentation</a>
(also as <a class="reference external" href="http://www.adelton.com/docs/idm/idm-scaling-out-and-up.pdf">PDF
slides</a>)</p></li>
</ul>
</section>
<section id="external-authentication-for-django-projects">
<span id="id18"></span><h2>External Authentication for Django Projects<a class="headerlink" href="#external-authentication-for-django-projects" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="http://www.adelton.com/django/external-authentication-for-django-projects">EuroPython 2015
presetnation</a>
(also as <a class="reference external" href="http://www.adelton.com/django/external-authentication-for-django-projects.pdf">PDF
slides</a>)</p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/archive/pages/Web_App_Authentication.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>