<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Overview &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="Message.html" />
    <link rel="prev" title="&lt;no title&gt;" href="Mbasti.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h1>
<p>IPA and Samba use DNS records to inform the clients about their
services. Some of these records use the same name, but they can be
merged because they are pointing to the same service (e.g. Kerberos
service). However, there are some records that use the same name but
pointing to different services (e.g. IPA LDAP service vs. Samba LDAP
service).</p>
</section>
<section id="ipa-dns-records">
<span id="id1"></span><h1>IPA DNS Records<a class="headerlink" href="#ipa-dns-records" title="Permalink to this heading">¶</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_ldap</span><span class="o">.</span><span class="n">_tcp</span>              <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">389</span>        <span class="n">ipa</span>

<span class="n">_kerberos</span>               <span class="n">IN</span> <span class="n">TXT</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>

<span class="n">_kerberos</span><span class="o">.</span><span class="n">_tcp</span>          <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span>         <span class="n">ipa</span>
<span class="n">_kerberos</span><span class="o">.</span><span class="n">_udp</span>          <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span>         <span class="n">ipa</span>
<span class="n">_kerberos</span><span class="o">-</span><span class="n">master</span><span class="o">.</span><span class="n">_tcp</span>   <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span>         <span class="n">ipa</span>
<span class="n">_kerberos</span><span class="o">-</span><span class="n">master</span><span class="o">.</span><span class="n">_udp</span>   <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span>         <span class="n">ipa</span>
<span class="n">_kpasswd</span><span class="o">.</span><span class="n">_tcp</span>           <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">464</span>        <span class="n">ipa</span>
<span class="n">_kpasswd</span><span class="o">.</span><span class="n">_udp</span>           <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">464</span>        <span class="n">ipa</span>

<span class="n">_ntp</span><span class="o">.</span><span class="n">_udp</span>               <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">123</span>        <span class="n">ipa</span>
</pre></div>
</div>
</section>
<section id="samba-dns-records">
<span id="id2"></span><h1>Samba DNS Records<a class="headerlink" href="#samba-dns-records" title="Permalink to this heading">¶</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gc</span><span class="o">.</span><span class="n">_msdcs</span>               <span class="n">IN</span> <span class="n">CNAME</span>        <span class="n">samba</span>
<span class="mi">27</span><span class="n">f515e4</span><span class="o">-</span><span class="n">f5af</span><span class="o">-</span><span class="mi">4396</span><span class="o">-</span><span class="n">bc93</span><span class="o">-</span><span class="mi">130013076</span><span class="n">ab7</span><span class="o">.</span><span class="n">_msdcs</span>     <span class="n">IN</span> <span class="n">CNAME</span>        <span class="n">samba</span>

<span class="n">_gc</span><span class="o">.</span><span class="n">_tcp</span>                <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">3268</span>       <span class="n">samba</span>
<span class="n">_gc</span><span class="o">.</span><span class="n">_tcp</span><span class="o">.</span><span class="n">Default</span><span class="o">-</span><span class="n">First</span><span class="o">-</span><span class="n">Site</span><span class="o">-</span><span class="n">Name</span><span class="o">.</span><span class="n">_sites</span> <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">3268</span>       <span class="n">samba</span>
<span class="n">_ldap</span><span class="o">.</span><span class="n">_tcp</span><span class="o">.</span><span class="n">gc</span><span class="o">.</span><span class="n">_msdcs</span>    <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">389</span>        <span class="n">samba</span>
<span class="n">_ldap</span><span class="o">.</span><span class="n">_tcp</span><span class="o">.</span><span class="n">Default</span><span class="o">-</span><span class="n">First</span><span class="o">-</span><span class="n">Site</span><span class="o">-</span><span class="n">Name</span><span class="o">.</span><span class="n">_sites</span><span class="o">.</span><span class="n">gc</span><span class="o">.</span><span class="n">_msdcs</span>     <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">389</span> <span class="n">samba</span>

<span class="n">_ldap</span><span class="o">.</span><span class="n">_tcp</span>              <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">389</span>        <span class="n">samba</span>
<span class="n">_ldap</span><span class="o">.</span><span class="n">_tcp</span><span class="o">.</span><span class="n">dc</span><span class="o">.</span><span class="n">_msdcs</span>    <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">389</span>        <span class="n">samba</span>
<span class="n">_ldap</span><span class="o">.</span><span class="n">_tcp</span><span class="o">.</span><span class="n">pdc</span><span class="o">.</span><span class="n">_msdcs</span>   <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">389</span>        <span class="n">samba</span>
<span class="n">_ldap</span><span class="o">.</span><span class="n">_tcp</span><span class="o">.</span><span class="n">b168ccf1</span><span class="o">-</span><span class="n">d862</span><span class="o">-</span><span class="mi">4146</span><span class="o">-</span><span class="mi">8</span><span class="n">cea</span><span class="o">-</span><span class="mi">0021</span><span class="n">f3c88feb</span> <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">389</span>        <span class="n">samba</span>
<span class="n">_ldap</span><span class="o">.</span><span class="n">_tcp</span><span class="o">.</span><span class="n">b168ccf1</span><span class="o">-</span><span class="n">d862</span><span class="o">-</span><span class="mi">4146</span><span class="o">-</span><span class="mi">8</span><span class="n">cea</span><span class="o">-</span><span class="mi">0021</span><span class="n">f3c88feb</span><span class="o">.</span><span class="n">domains</span><span class="o">.</span><span class="n">_msdcs</span>          <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">389</span> <span class="n">samba</span>
<span class="n">_ldap</span><span class="o">.</span><span class="n">_tcp</span><span class="o">.</span><span class="n">Default</span><span class="o">-</span><span class="n">First</span><span class="o">-</span><span class="n">Site</span><span class="o">-</span><span class="n">Name</span><span class="o">.</span><span class="n">_sites</span>               <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">389</span> <span class="n">samba</span>
<span class="n">_ldap</span><span class="o">.</span><span class="n">_tcp</span><span class="o">.</span><span class="n">Default</span><span class="o">-</span><span class="n">First</span><span class="o">-</span><span class="n">Site</span><span class="o">-</span><span class="n">Name</span><span class="o">.</span><span class="n">_sites</span><span class="o">.</span><span class="n">dc</span><span class="o">.</span><span class="n">_msdcs</span>     <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">389</span> <span class="n">samba</span>

<span class="n">_kerberos</span><span class="o">.</span><span class="n">_tcp</span>          <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span>         <span class="n">samba</span>
<span class="n">_kerberos</span><span class="o">.</span><span class="n">_tcp</span><span class="o">.</span><span class="n">dc</span><span class="o">.</span><span class="n">_msdcs</span>        <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span> <span class="n">samba</span>
<span class="n">_kerberos</span><span class="o">.</span><span class="n">_tcp</span><span class="o">.</span><span class="n">Default</span><span class="o">-</span><span class="n">First</span><span class="o">-</span><span class="n">Site</span><span class="o">-</span><span class="n">Name</span><span class="o">.</span><span class="n">_sites</span>   <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span> <span class="n">samba</span>
<span class="n">_kerberos</span><span class="o">.</span><span class="n">_tcp</span><span class="o">.</span><span class="n">Default</span><span class="o">-</span><span class="n">First</span><span class="o">-</span><span class="n">Site</span><span class="o">-</span><span class="n">Name</span><span class="o">.</span><span class="n">_sites</span><span class="o">.</span><span class="n">dc</span><span class="o">.</span><span class="n">_msdcs</span> <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span> <span class="n">samba</span>
<span class="n">_kerberos</span><span class="o">.</span><span class="n">_udp</span>          <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span>         <span class="n">samba</span>

<span class="n">_kerberos</span><span class="o">-</span><span class="n">master</span><span class="o">.</span><span class="n">_tcp</span>           <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span>         <span class="n">samba</span>
<span class="n">_kerberos</span><span class="o">-</span><span class="n">master</span><span class="o">.</span><span class="n">_udp</span>           <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span>         <span class="n">samba</span>

<span class="n">_kpasswd</span><span class="o">.</span><span class="n">_tcp</span>           <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">464</span>        <span class="n">samba</span>
<span class="n">_kpasswd</span><span class="o">.</span><span class="n">_udp</span>           <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">464</span>        <span class="n">samba</span>

<span class="n">_kerberos</span>               <span class="n">IN</span> <span class="n">TXT</span>  <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
</pre></div>
</div>
</section>
<section id="proposed-solution">
<span id="id3"></span><h1>Proposed Solution<a class="headerlink" href="#proposed-solution" title="Permalink to this heading">¶</a></h1>
<p>IPA’s and Samba’s LDAP services will be bound to different virtual
hostnames. The DNS record for IPA’s LDAP service will be renamed and
point to IPA’s virtual hostname. The DNS record for Samba’s LDAP service
will remain the same and point to Samba’s virtual hostname. The IPA
clients will be modified to look for the new DNS record. Samba clients
will continue to use the existing DNS record.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_ldap</span><span class="o">.</span><span class="n">_tcp</span><span class="o">.</span><span class="n">_ipa</span>         <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">389</span>        <span class="n">ipa</span>
<span class="n">_ldap</span><span class="o">.</span><span class="n">_tcp</span>              <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">389</span>        <span class="n">samba</span>
</pre></div>
</div>
<p>There will be only 1 Kerberos service with could be accessed using IPA’s
and Samba’s virtual hostname. Both IPA and Samba clients will use the
same KDC.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_kerberos</span>               <span class="n">IN</span> <span class="n">TXT</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>

<span class="n">_kerberos</span><span class="o">.</span><span class="n">_tcp</span>          <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span>         <span class="n">ipa</span>
<span class="n">_kerberos</span><span class="o">.</span><span class="n">_tcp</span><span class="o">.</span><span class="n">dc</span><span class="o">.</span><span class="n">_msdcs</span>        <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span> <span class="n">ipa</span>
<span class="n">_kerberos</span><span class="o">.</span><span class="n">_tcp</span><span class="o">.</span><span class="n">Default</span><span class="o">-</span><span class="n">First</span><span class="o">-</span><span class="n">Site</span><span class="o">-</span><span class="n">Name</span><span class="o">.</span><span class="n">_sites</span>   <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span> <span class="n">ipa</span>
<span class="n">_kerberos</span><span class="o">.</span><span class="n">_tcp</span><span class="o">.</span><span class="n">Default</span><span class="o">-</span><span class="n">First</span><span class="o">-</span><span class="n">Site</span><span class="o">-</span><span class="n">Name</span><span class="o">.</span><span class="n">_sites</span><span class="o">.</span><span class="n">dc</span><span class="o">.</span><span class="n">_msdcs</span> <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span> <span class="n">ipa</span>
<span class="n">_kerberos</span><span class="o">.</span><span class="n">_udp</span>          <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span>         <span class="n">ipa</span>

<span class="n">_kerberos</span><span class="o">-</span><span class="n">master</span><span class="o">.</span><span class="n">_tcp</span>   <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span>         <span class="n">ipa</span>
<span class="n">_kerberos</span><span class="o">-</span><span class="n">master</span><span class="o">.</span><span class="n">_udp</span>   <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">88</span>         <span class="n">ipa</span>

<span class="n">_kpasswd</span><span class="o">.</span><span class="n">_tcp</span>           <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">464</span>        <span class="n">ipa</span>
<span class="n">_kpasswd</span><span class="o">.</span><span class="n">_udp</span>           <span class="n">IN</span> <span class="n">SRV</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">464</span>        <span class="n">ipa</span>
</pre></div>
</div>
<p><a class="reference external" href="Category:Obsolete">Category:Obsolete</a></p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/archive/pages/Merging_IPA_and_Samba_DNS.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>