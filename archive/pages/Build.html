<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>General &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Introduction" href="CLI_Overview.html" />
    <link rel="prev" title="Summary" href="Bind.v9.10.ltrace.pkcs11_functions.log.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="general">
<h1>General<a class="headerlink" href="#general" title="Permalink to this heading">¶</a></h1>
<p>We tend to primarily develop by building rpms and installing them rather
than ‘make install’. The make install method should work but it isn’t
tested extensively.</p>
<p>The spec files within this repo are similar but not the same as in the
Fedora or RHEL repo.</p>
<p>Details about build system can be found in the <a class="reference external" href="V4/Build_system_refactoring">V4/Build system
refactoring</a> design page.</p>
</section>
<section id="the-version-file">
<span id="id1"></span><h1>The VERSION file<a class="headerlink" href="#the-version-file" title="Permalink to this heading">¶</a></h1>
<p>The version of IPA is mostly controlled in the file VERSION.m4 in the
root of the IPA git repo. This file is generally self-explanatory but it
does distinguish between developer builds and final releases. This is
really only important if you are building RPMs, it puts the GIT version
into the release so you can easily tell where in the revision history
you are working from.</p>
<p>To build a release, define <code class="docutils literal notranslate"><span class="pre">IPA_VERSION_IS_GIT_SNAPSHOT</span></code> as <code class="docutils literal notranslate"><span class="pre">no</span></code> in
VERSION.m4 file before you execute the build.</p>
</section>
<section id="building-from-the-git">
<span id="id2"></span><h1>Building from the git<a class="headerlink" href="#building-from-the-git" title="Permalink to this heading">¶</a></h1>
<p>First, clone our git tree of your project:</p>
<p><code class="docutils literal notranslate"><span class="pre">$ git clone ``\</span> <span class="pre">```https://pagure.io/freeipa.git</span></code> &lt;<a class="reference external" href="https://pagure.io/freeipa.git">https://pagure.io/freeipa.git</a>&gt;`__</p>
<p>Next, we will install all packages needed to build FreeIPA as they do
not have to be installed on your system. You can install them easily by
following instructions:</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">$ cd freeipa</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">$ cp freeipa.spec.in freeipa-builddep.spec # this is workaround for yum-builddep: file name has to end with &quot;.spec&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">$ sudo yum-builddep freeipa-builddep.spec</span></code></div>
</div>
<p>or with dnf (and builddep plugin from <code class="docutils literal notranslate"><span class="pre">dnf-plugins-core</span></code>:</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">$ sudo dnf install rpm-build</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">$ sudo dnf builddep -b -D &quot;with_wheels 1&quot; -D &quot;with_lint 1&quot; --spec \</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">freeipa.spec.in --best --allowerasing --setopt=install_weak_deps=False</span></code></div>
</div>
<p>A dose of <code class="docutils literal notranslate"><span class="pre">--enablerepo=updates-testing</span></code> may at times be needed.</p>
<p>Depending on the git branch which we want to build, Fedora official
repositories don’t always contain versions of packages required for the
build and installation. These requirements are located in
<a class="reference external" href="https://copr.fedoraproject.org/">COPR</a> repositories. Current ones
are:</p>
<ul class="simple">
<li><p>master branch:
<a class="reference external" href="https://copr.fedorainfracloud.org/coprs/g/freeipa/freeipa-master/">&#64;freeipa/freeipa-master</a></p></li>
<li><p>ipa-4-6 branch for Fedora 26 and Fedora 27:
<a class="reference external" href="https://copr.fedorainfracloud.org/coprs/g/freeipa/freeipa-4-6/">&#64;freeipa/freeipa-4-6</a></p></li>
<li><p>ipa-4-5 branch for Fedora 25 and Fedora 26:
<a class="reference external" href="https://copr.fedorainfracloud.org/coprs/g/freeipa/freeipa-4-5/">&#64;freeipa/freeipa-4-5</a></p></li>
<li><p>ipa-4-4 branch for Fedora 24:
<a class="reference external" href="https://copr.fedorainfracloud.org/coprs/g/freeipa/freeipa-4-4/">&#64;freeipa/freeipa-4-4</a></p></li>
<li><p>ipa-4-3 branch:
<a class="reference external" href="https://copr.fedorainfracloud.org/coprs/g/freeipa/freeipa-4-3/">&#64;freeipa/freeipa-4-3</a>
(<em>abandoned</em>)</p></li>
<li><p>ipa-4-2 branch:
<a class="reference external" href="https://copr.fedoraproject.org/coprs/mkosek/freeipa-4.2/">mkosek/freeipa-4.2</a>
(<em>abandoned</em>)</p></li>
<li><p>ipa-4-1 branch:
<a class="reference external" href="https://copr.fedoraproject.org/coprs/mkosek/freeipa-4.1/">mkosek/freeipa-4.1</a>
(<em>abandoned</em>)</p></li>
<li><p>ipa-4-1 branch for Fedora 20 and CentOS:
<a class="reference external" href="https://copr.fedoraproject.org/coprs/mkosek/freeipa/">mkosek/freeipa</a>
(<em>abandoned</em>)</p></li>
</ul>
<p>To use the repo run (requires <strong>dnf-plugins-core</strong> package installed):</p>
<p>`` $ sudo dnf copr enable &#64;freeipa/freeipa-master``</p>
<p>When all packages required for the build are installed, you can start
building FreeIPA. The result will be a tarball with sources, SRPM and
RPMs that can be installed on a system:</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">$ ./makerpms.sh</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">$ sudo yum localinstall dist/rpms/*.rpm</span></code></div>
</div>
<p>or with dnf</p>
<p><code class="docutils literal notranslate"><span class="pre">$ sudo dnf install dist/rpms/*.rpm</span></code></p>
<p>Sometimes the build can fail because of garbage from branch switching or
previous builds. To avoid that, clean the git repository, but make sure
that all your changes are committed.</p>
<p>`` $ git clean -dfx``</p>
</section>
<section id="running-freeipa-in-tree">
<span id="id3"></span><h1>Running FreeIPA In-tree<a class="headerlink" href="#running-freeipa-in-tree" title="Permalink to this heading">¶</a></h1>
<p>If you have IPA installed on your development system you can do some
limited in-tree development of management plugins. To do this:</p>
<p>Server setup:</p>
<ul class="simple">
<li><p>As root user, install IPA using ipa-server-install</p></li>
<li><p>Create ~/.ipa/alias/.pwd and enter the admin password</p></li>
<li><p>Run kinit admin</p></li>
<li><p>To run the server, execute python lite-server.py</p></li>
</ul>
<p>Client setup:</p>
<ul class="simple">
<li><p>Copy /etc/ipa/default.conf into ~/.ipa/default.conf</p></li>
<li><p>Replace xmlrpc_uri with <a class="reference external" href="http://127.0.0.1:8888/ipa/xml">http://127.0.0.1:8888/ipa/xml</a></p></li>
<li><p>To run the CLI, execute ./ipa</p></li>
</ul>
<p>FreeIPA will detect that it is running in-tree and will use the port and
XML-RPC location that <code class="docutils literal notranslate"><span class="pre">lite-server.py</span></code> is listening only. If you make
changes to the server-side of a plugin you’ll need to restart
<code class="docutils literal notranslate"><span class="pre">lite-server.py</span></code>.</p>
<p><a class="reference external" href="Category:ImproveOrRemove">Category:ImproveOrRemove</a></p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/archive/pages/Build.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>