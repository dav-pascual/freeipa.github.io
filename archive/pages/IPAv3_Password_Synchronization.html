<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Overview &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Prepare Replica" href="IPAv3_Replication.html" />
    <link rel="prev" title="Prerequisites" href="IPAv3_Installation.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h1>
<p>There are several methods to share the password across IPA and Samba:</p>
<ul class="simple">
<li><p>sharing the clear text password via LDB module,</p></li>
<li><p>sharing the clear text password via LDAP backend,</p></li>
<li><p>sharing the encryption keys.</p></li>
</ul>
<p>Regardless of the method, to ensure Kerberos interoperability each
system must be configured to generate encryption keys that are supported
by both applications.</p>
</section>
<section id="sharing-clear-text-password">
<span id="id1"></span><h1>Sharing Clear Text Password<a class="headerlink" href="#sharing-clear-text-password" title="Permalink to this heading">¶</a></h1>
<p>Sharing the clear text password means that the clear text password will
be distributed between IPA and Samba so each can create any type of
encryption keys or password hashes because it has the clear text
password.</p>
<section id="using-ldb-module">
<span id="id2"></span><h2>Using LDB Module<a class="headerlink" href="#using-ldb-module" title="Permalink to this heading">¶</a></h2>
<p>In this method an LDB Module will intercept the user password before
being encrypted, then the Sync Agent will use it to set the password of
the corresponding IPA user.</p>
<section id="from-ipa-to-samba">
<span id="id3"></span><h3>From IPA to Samba<a class="headerlink" href="#from-ipa-to-samba" title="Permalink to this heading">¶</a></h3>
<p>When the password of an IPA user is modified the clear text password
will be recorded in the DS change log records. The Change Log Monitor
can retrieve it and pass it to the Sync Agent, which in turn will use it
to set the password of the corresponding Samba user.</p>
<figure class="align-default" id="id9">
<img alt="Ipa3-password-synchronization1.png" src="../../_images/Ipa3-password-synchronization1.png" />
<figcaption>
<p><span class="caption-text">Ipa3-password-synchronization1.png</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="from-samba-to-ipa">
<span id="id4"></span><h3>From Samba to IPA<a class="headerlink" href="#from-samba-to-ipa" title="Permalink to this heading">¶</a></h3>
<p>When the password of a Samba user is modified, Samba will compute the
encryption keys before storing it in the DS, so the clear text password
will not be not available in the DS change log records. The Syncback
Module will intercept the operation and capture the clear text password,
send it to the Sync Agent which will use it to set the password of the
corresponding IPA user.</p>
<figure class="align-default" id="id10">
<img alt="Ipa3-password-synchronization2.png" src="../../_images/Ipa3-password-synchronization2.png" />
<figcaption>
<p><span class="caption-text">Ipa3-password-synchronization2.png</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="using-ldap-backend">
<span id="id5"></span><h2>Using LDAP Backend<a class="headerlink" href="#using-ldap-backend" title="Permalink to this heading">¶</a></h2>
<p>In this method Samba will store the user password as clear text in the
LDAP backend, then the Sync Agent will use it to set the password of the
corresponding IPA user.</p>
</section>
</section>
<section id="sharing-encryption-keys">
<span id="id6"></span><h1>Sharing Encryption Keys<a class="headerlink" href="#sharing-encryption-keys" title="Permalink to this heading">¶</a></h1>
<p>Sharing the encryption keys means that both IPA and Samba will generate
the encryption keys and password hashes needed by both applications.</p>
<section id="from-ipa-to-samba-1">
<span id="id7"></span><h2>From IPA to Samba<a class="headerlink" href="#from-ipa-to-samba-1" title="Permalink to this heading">¶</a></h2>
<p>When the password of an IPA user is modified the IPA plugin must also
generate the Samba keys and store it in the DIT. The Change Log Monitor
will pick up the Samba keys and pass it to the Sync Agent, which then
will store the keys directly into the corresponding Samba user object in
Samba’s DS backend.</p>
<figure class="align-default" id="id11">
<img alt="Ipa3-password-synchronization3.png" src="../../_images/Ipa3-password-synchronization3.png" />
<figcaption>
<p><span class="caption-text">Ipa3-password-synchronization3.png</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="from-samba-to-ipa-1">
<span id="id8"></span><h2>From Samba to IPA<a class="headerlink" href="#from-samba-to-ipa-1" title="Permalink to this heading">¶</a></h2>
<p>When the password of a Samba user is modified, the Syncback Module could
do either one of the following:</p>
<ul class="simple">
<li><p>extract Samba keys and reuse it as IPA keys,</p></li>
<li><p>if that’s not sufficient, the module could intercept the clear text
password and generate the IPA keys.</p></li>
</ul>
<p>Then the module will pass IPA keys to the Sync Agent, which then will
store it in the corresponding IPA user object.</p>
<figure class="align-default" id="id12">
<img alt="Ipa3-password-synchronization4.png" src="../../_images/Ipa3-password-synchronization4.png" />
<figcaption>
<p><span class="caption-text">Ipa3-password-synchronization4.png</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><a class="reference external" href="Category:Obsolete">Category:Obsolete</a></p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/archive/pages/IPAv3_Password_Synchronization.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>