<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Overview &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Administration Framework" href="../Troubleshooting/Administration_and_Web_UI.html" />
    <link rel="prev" title="Overview of D-BUS Protocol" href="SBUS.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h1>
<p>The System Security Services Daemon (the SSSD) is actually a collection
of different services and daemons running in the system context. These
services handle a variety of authentication and authorization functions.
As a result, it is highly imperative that these services are fully
available and functional at all times. The continued outage of any
service provided by the SSSD may render the machine unusable. To avoid
this, the SSSD will provide a special Monitor daemon that will maintain
the lifecycle of all other SSSD services.</p>
</section>
<section id="main-functions">
<span id="id1"></span><h1>Main Functions<a class="headerlink" href="#main-functions" title="Permalink to this heading">¶</a></h1>
<p>The Service Controller will be in charge of:</p>
<ul class="simple">
<li><p>Starting of the SSSD services at launch or the startup of the system</p></li>
<li><p>Stopping of the SSSD services when it shuts down or at the shutdown
of the system</p></li>
<li><p>Monitor that all the SSSD processes that have to stay alive stay
alive</p></li>
<li><p>Restart any SSSD processes that have exited or crashed</p></li>
</ul>
<p>Additional goals of the Monitor daemon are as follows:</p>
<ul class="simple">
<li><p>It must run on all supported client platforms.</p></li>
<li><p>It should not require the installation of any dependencies that are
not installed by default on the supported client platforms.</p></li>
</ul>
</section>
<section id="internal-logic">
<span id="id2"></span><h1>Internal Logic<a class="headerlink" href="#internal-logic" title="Permalink to this heading">¶</a></h1>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading">¶</a></h2>
<p>The Monitor service for the SSSD will maintain its configuration within
an LDB database. Available configuration options for the Monitor will
be:</p>
<ul class="simple">
<li><p>Enabled/Disabled services</p>
<ul>
<li><p>Arguments and options to be passed to the services</p></li>
</ul>
</li>
<li><p>Number of retry attempts for failed service start</p></li>
<li><p>Service polling interval</p>
<ul>
<li><p>Service polling failure tolerance</p></li>
</ul>
</li>
<li><p>D-BUS monitor socket</p></li>
</ul>
<p>For further detail, see the Configuration Store section below.</p>
</section>
<section id="service-control">
<span id="id3"></span><h2>Service Control<a class="headerlink" href="#service-control" title="Permalink to this heading">¶</a></h2>
<p>At startup, the Monitor service will fork off each of the enabled SSSD
services into their own, managed child process. Each child process will
connect via private D-BUS communication to the configured D-BUS monitor
socket. The monitor service will then challenge the client connection to
identify itself by service name and version.</p>
<p>If the child service goes down (see Service Monitoring), the Monitor
service will attempt to restart the service with the arguments and
options specified in the configuration database.</p>
<p>If the configuration of a client service changes, the Monitor will send
a private D-BUS message to the process, triggering a service update.
This may be an alteration of a particular option to the service, or it
may trigger the service to shut down completely.</p>
</section>
<section id="service-monitoring">
<span id="id4"></span><h2>Service Monitoring<a class="headerlink" href="#service-monitoring" title="Permalink to this heading">¶</a></h2>
<p>The child services will be monitored in two ways.</p>
<ol class="arabic simple">
<li><p>At a configured interval, the client service will be challenged with
a simple ping. If the service fails to respond to the configured
number of pings (the failure tolerance), it will be marked as
crashed/hung and restarted by the Service Control.</p></li>
<li><p>All SSSD services will maintain a connection to the Monitor over the
private D-BUS socket. If the service crashes or is killed without the
Service Manager’s knowledge, this communication will be broken and
the Monitor will immediately attempt to relaunch the affected
service.</p></li>
</ol>
</section>
</section>
<section id="appendix">
<h1>Appendix<a class="headerlink" href="#appendix" title="Permalink to this heading">¶</a></h1>
<section id="configuration-store">
<span id="id5"></span><h2>Configuration Store<a class="headerlink" href="#configuration-store" title="Permalink to this heading">¶</a></h2>
<p>The configuration store can will be represented by LDB which give a
flexibility of the memory mapped LDAP. The structure of the
configuration store will be represented thusly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cn</span><span class="o">=</span><span class="n">config</span>
<span class="o">|</span>
<span class="o">----</span><span class="n">cn</span><span class="o">=</span><span class="n">services</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">config</span>
    <span class="o">|</span>
    <span class="o">----</span><span class="n">cn</span><span class="o">=</span><span class="n">monitor</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">services</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">config</span>
    <span class="o">|</span>   <span class="n">dbusSocket</span><span class="p">:</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">sss</span><span class="o">/</span><span class="n">dbus</span><span class="o">/</span><span class="n">monitor</span>
    <span class="o">|</span>   <span class="n">ActiveServices</span><span class="p">:</span> <span class="n">nss</span><span class="p">,</span> <span class="n">pam</span>
    <span class="o">|</span>
    <span class="o">----</span><span class="n">cn</span><span class="o">=</span><span class="n">nss</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">services</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">config</span>
    <span class="o">|</span>   <span class="n">unixSocket</span><span class="p">:</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">sss</span><span class="o">/</span><span class="n">pipes</span><span class="o">/</span><span class="n">nss</span>
    <span class="o">|</span>
    <span class="o">----</span><span class="n">cn</span><span class="o">=</span><span class="n">pam</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">services</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">config</span>
        <span class="n">unixSocket</span><span class="p">:</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">sss</span><span class="o">/</span><span class="n">pipes</span><span class="o">/</span><span class="n">pam</span>
</pre></div>
</div>
<p>Further configuration options pending.</p>
</section>
<section id="d-bus-methods">
<span id="id6"></span><h2>D-BUS Methods<a class="headerlink" href="#d-bus-methods" title="Permalink to this heading">¶</a></h2>
<section id="services">
<h3>Services<a class="headerlink" href="#services" title="Permalink to this heading">¶</a></h3>
<p>The following D-BUS methods shall be exposed by all SSSD services
managed by the Monitor:</p>
<dl class="simple">
<dt>getIdentity</dt><dd><p>INPUT:
OUTPUT: STRING name, UINT16 version</p>
</dd>
<dt>ping</dt><dd><p>INPUT:
OUTPUT:</p>
</dd>
</dl>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../_sources/archive/pages/SSSD/Service_Controller_Daemon.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>