<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>History &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Add system to IPA Domain (ensure DNS is working correctly otherwise this step will fail)" href="Squid_Integration_with_FreeIPA_using_Single_Sign_On.html" />
    <link rel="prev" title="Sample TLS Profile File for Solaris" href="SolarisTlsProfile.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <p>This is current as of freeiPA 4.6.1, October 2017.</p>
<section id="history">
<h1>History<a class="headerlink" href="#history" title="Permalink to this heading">¶</a></h1>
<p>First, some history.</p>
<p>With IPAv1 we didn’t have a cohesive idea on how to structure the code
so it was grown organically. There was a WSGI server piece and some
discrete client commands (ipa-adduser, ipa-deluser, etc). A webUI was
provided by TurboGears. A client and server installer were provided to
aid in configuration.</p>
<p>This generally worked but there were some significant deficiencies: -
Every command was separate with little to no code-sharing - We lacked
sessions so every request was very expensive with a full Kerberos
handshake plus TLS handshake - Input validation was done in both the
client and server and also in the webUI so lots of code was duplicated
and it was difficult to be in sync</p>
<p>It was not all bad, some users deployed production servers using v1.
Despite the warts it was still better than many hand-rolled identity
management systems. With v2 we planned to address the major problems
with v1. For details on this see <a class="reference external" href="V2_Designs">V2_Designs</a> and
<a class="reference external" href="V2_Proposals">V2_Proposals</a></p>
<p>From an architecture perspective the whole client/server model was
rewritten from scratch. In order to ensure good client interaction it
was decided that the client and server would run the same input
validation, including the webUI as a client. It was important that the
server re-check input in case someone used the API directly. It would be
some time before any discussion of “support” for the XML-RPC API would
happen but this ensured that there would be fewer surprises.</p>
<p>This implementation centered around a framework that defined the basic
rules for a plugable architecture:</p>
<ul class="simple">
<li><p>A base set of argument and option types including validators - A</p></li>
</ul>
<p>defintion of inputs and outputs - A plugin execution structure that
consisted of pre-operation, execution, post-operation and exception
handling - Centralized error handling with control over public and
private exceptions to prevent information disclosure - Plugin
extensibility to provide a way to extend an existing plugin without
having to override it - A set of CRUD rules</p>
<p>The long-term plan was always to break ipalib out as a separate package
to live alongside IPA. We gave up on this eventually in order to speed
development.</p>
<p>The basic idea of ipalib is that both the client and server have exactly
the same set of options and arguments which means the same validations
could be run. The difference being that the client would call the
forward() method when the validations were complete and the server would
call execute().</p>
<p>Data returned was defined in a more hand-wavy manner by using Output
parameters. These generally consisted of returning the dn of the object
created/modified/deleted, an optional exception, an optional dict of the
entry a summary message and in the case of find methods, a count.</p>
<p>The pre and post operation routines would allow the user to modify the
data before or after execution. The execution method would commit any
changes to LDAP. The exception handlers would let one customize what
gets raised.</p>
<p>This basic framework lasted through v3. freeIPA v4 brought many changes
including a thin client which eliminated the client-side validation and
moved the plugins out of ipalib into ipaserver.</p>
</section>
<section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h1>
<p>At a high level the tree can be broken into four pieces: - server -
client - common - tests</p>
</section>
<section id="server">
<h1>Server<a class="headerlink" href="#server" title="Permalink to this heading">¶</a></h1>
<p>The server-side specific portions consist of:</p>
<p>daemons - 380-ds plugins, the OTP daemon, etc. util - common functions
used by daemons ipaserver - the RPC handler and plugins init - systemd
and tmpfiles configuration files install - common install items used by
both client and server though I include it here because it is heavily
server-based ipaplatform - used primarily by server now but abstracts
distro-level options asn1 - auto-generated ASN1. for IPA keytab
generation</p>
</section>
<section id="client">
<h1>Client<a class="headerlink" href="#client" title="Permalink to this heading">¶</a></h1>
<p>client - client installers ipaclient - client installer library</p>
</section>
<section id="common">
<h1>Common<a class="headerlink" href="#common" title="Permalink to this heading">¶</a></h1>
<p>ipalib - IPA framework ipapython - common functions beween server and
client that fall outside ipalib</p>
</section>
<section id="tests">
<h1>Tests<a class="headerlink" href="#tests" title="Permalink to this heading">¶</a></h1>
<p>ipatests - unit and integration tests</p>
</section>
<section id="other">
<h1>Other<a class="headerlink" href="#other" title="Permalink to this heading">¶</a></h1>
<p>po - translations. We use zanata doc - some oldish documentation on
using ipalib and writing plugins contrib - handy tools that are not
shipped pypi - used for generating PyPi packages</p>
<p>An important file that lives on the top-level is freeipa.spec.in. This
is the base spec file that is used to generated rpms in-tree and should
match any downstream bulids (Fedora and RHEL). Keeping downstream builds
as close as possible makes identifying differences on rebased
substantially easier.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/archive/pages/Source_tree_overview.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>