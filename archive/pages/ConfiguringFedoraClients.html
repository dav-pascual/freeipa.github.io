<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Introduction &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="ConfiguringHpuxClients.html" />
    <link rel="prev" title="Introduction" href="ConfiguringAixClients.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <p>Back to <a class="reference external" href="FreeIPAv1:Client_Configuration_Guide">FreeIPAv1:Client Configuration
Guide</a></p>
<p>__TOC__</p>
<section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h1>
<p>This document describes the procedures required to configure Fedora as
an IPA client. IPA 1.2 supports Fedora 8, 9, 10 and 11 as IPA clients.
Previous versions may work as well if manually configured (or the
freeIPA src.rpm rebuilt on that platform).</p>
<p>This document distinguishes between commands to be run as root versus a
regular user. Commands to be run as root are prefixed with a # symbol.
Commands to be run as a regular user are prefixed with a $ symbol.</p>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /><strong>Note:</strong></p>
<blockquote>
<div><p>Before starting the freeIPA installation, ensure that you update
your system with all the latest packages.</p>
</div></blockquote>
</div></blockquote>
</section>
<section id="installing-the-ipa-client">
<span id="id1"></span><h1>Installing the IPA Client<a class="headerlink" href="#installing-the-ipa-client" title="Permalink to this heading">¶</a></h1>
<ol class="arabic simple">
<li><p>Install the client and tools with:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># yum install ipa-client</span>
</pre></div>
</div>
<p>This should install all the dependencies as well.</p>
<p>2. If your IPA server was set up for DNS, and is in the same domain as
the client, add the server’s IP address to the client’s
<code class="docutils literal notranslate"><span class="pre">/etc/resolv.conf</span></code> file.</p>
<p>So add a line that looks something like (depending on the IP address of
your IPA server).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nameserver</span> <span class="mf">192.168.100.1</span>
</pre></div>
</div>
<p>Note: this is not typical.</p>
</section>
<section id="configuring-the-ipa-client">
<span id="id2"></span><h1>Configuring the IPA Client<a class="headerlink" href="#configuring-the-ipa-client" title="Permalink to this heading">¶</a></h1>
<section id="configuring-client-authentication">
<span id="id3"></span><h2>Configuring Client Authentication<a class="headerlink" href="#configuring-client-authentication" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>The IPA client requires that an IPA server already exist.</p>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple">
<li><p>Use the following command to set up the freeIPA client:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa-client-install</span>
</pre></div>
</div>
<p>The script should set up the IPA client without prompting for any
further information. This includes configuring the name service cache
daemon to start at boot time. This will cache the most common name
service requests from the client, and reduce the load on the server.</p>
<p>When the script has finished configuring the freeIPA client, it will
display information about the realm, DNS domain, IPA server, etc. You
should see output similar to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Discovery was successful!
Realm: EXAMPLE.COM
DNS Domain: example.com
IPA Server: ipaserver.example.com
BaseDN: dc=example,dc=com
</pre></div>
</div>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>If your IPA server and client are not in the same domain, the
setup script will prompt you for the information that it requires.</p>
</div></blockquote>
</div></blockquote>
</section>
<section id="configuring-kerberos">
<span id="id4"></span><h2>Configuring Kerberos<a class="headerlink" href="#configuring-kerberos" title="Permalink to this heading">¶</a></h2>
<p>Only a basic Kerberos configuration file is created as part of the
Client Configuration procedures described above. You need to perform the
remaining configuration changes manually.</p>
<p>1. Modify the <code class="docutils literal notranslate"><span class="pre">/etc/krb5.conf</span></code> file on the client as shown below.
Ensure that you replace the example values with those that apply to your
deployment.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">libdefaults</span><span class="p">]</span>
 <span class="n">default_realm</span> <span class="o">=</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
 <span class="n">dns_lookup_realm</span> <span class="o">=</span> <span class="n">true</span>
 <span class="n">dns_lookup_kdc</span> <span class="o">=</span> <span class="n">true</span>
 <span class="n">forwardable</span> <span class="o">=</span> <span class="n">yes</span>
 <span class="n">ticket_lifetime</span> <span class="o">=</span> <span class="mi">24</span><span class="n">h</span>

<span class="p">[</span><span class="n">realms</span><span class="p">]</span>
 <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">kdc</span> <span class="o">=</span> <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">88</span>
  <span class="n">admin_server</span> <span class="o">=</span> <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">749</span>
  <span class="n">default_domain</span> <span class="o">=</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span>
 <span class="p">}</span>
<span class="p">[</span><span class="n">domain_realm</span><span class="p">]</span>
 <span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">=</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
 <span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">=</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
</pre></div>
</div>
</section>
<section id="configuring-client-tls">
<span id="id5"></span><h2>Configuring Client TLS<a class="headerlink" href="#configuring-client-tls" title="Permalink to this heading">¶</a></h2>
<p>The SSL/TLS settings are only required if you want to use SSL between
the clients and the server when performing operations such as account
lookups.</p>
<p>TLS Client Configuration for Linux clients is detailed at
<a class="reference external" href="http://directory.fedora.redhat.com/wiki/Howto:SSL">http://directory.fedora.redhat.com/wiki/Howto:SSL</a>. Refer to this link if
any additional information is required. The basic steps required are:</p>
<ol class="arabic simple">
<li><p>Modify the following in the <code class="docutils literal notranslate"><span class="pre">/etc/ldap.conf</span></code> file:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">URI</span>     <span class="n">ldap</span><span class="p">:</span><span class="o">//</span><span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="n">BASE</span> <span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">HOST</span> <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="n">TLS_CACERTDIR</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cacerts</span><span class="o">/</span>
<span class="n">TLS_REQCERT</span> <span class="n">allow</span>
</pre></div>
</div>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>Ensure that the directory you specify for TLS_CACERTDIR actually
exists.</p>
</div></blockquote>
</div></blockquote>
<p>2. Export your CA certificate to ASCII using the <strong>certutil</strong> utility
with the <strong>-a</strong> option.</p>
<p>3. Install this certificate in the <code class="docutils literal notranslate"><span class="pre">/etc/cacerts</span></code> directory as
follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># cp cacert.asc /etc/cacerts/`openssl x509 -noout \
  -hash -in cacert.asc`.0

The file name is the hash of the contents with a &quot;.0&quot; filename
extension.
</pre></div>
</div>
<p>4. If the TLS_CACERTDIR directive does not work, set the cacert file
directly:</p>
<p><code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">TLS_CACERT</span> <span class="pre">/etc/cacerts/cacert.asc</span></code></p>
<blockquote>
<div><p>If more than one CA certificate is required, concatenate these
certificates into a single file.</p>
</div></blockquote>
</section>
<section id="configuring-nfs-v4-with-kerberos">
<span id="id6"></span><h2>Configuring NFS v4 with Kerberos<a class="headerlink" href="#configuring-nfs-v4-with-kerberos" title="Permalink to this heading">¶</a></h2>
<p>Use the following procedure to configure NFS on the IPA client:</p>
<ol class="arabic simple">
<li><p>Obtain a Kerberos ticket for the <strong>admin</strong> user.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># kinit admin</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Add an NFS service principal on the client.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa-addservice nfs/ipaclient.example.com</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Get a keytab for the NFS service principal.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa-getkeytab -s ipaserver.example.com -p nfs/ipaclient.example.com -k /etc/krb5.keytab</span>
</pre></div>
</div>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /><strong>Note:</strong></p>
<blockquote>
<div><p>The Linux NFS implementation still has limited encryption type
support. You may need to use the <strong>-e des-cbc-crc</strong> option to the
<strong>ipa-getkeytab</strong> command for any <strong>nfs/&lt;FQDN&gt;</strong> service keytabs
you want to set up, both on the server and on all clients. This
will instruct the KDC to generate only DES keys.</p>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Add the following line to the <code class="docutils literal notranslate"><span class="pre">/etc/sysconfig/nfs</span></code> file:</p></li>
</ol>
<p><strong>SECURE_NFS=yes</strong></p>
<ol class="arabic simple" start="4">
<li><p>Start the <strong>rpcgssd</strong> daemon.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># service rpcgssd start</span>
</pre></div>
</div>
<p>Your IPA client should now be fully configured to mount NFS shares using
your Kerberos credentials. You can use the following command to test the
configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># mount -v -t nfs4 -o sec=krb5 ipaserver.example.com:/ /mnt</span>
</pre></div>
</div>
</section>
<section id="configuring-client-ssh-access">
<span id="id7"></span><h2>Configuring Client SSH Access<a class="headerlink" href="#configuring-client-ssh-access" title="Permalink to this heading">¶</a></h2>
<p>You can also configure the IPA client to accept incoming SSH requests
and authenticate with the user’s Kerberos credentials. After installing
and configuring the IPA client, use the following procedure to configure
the IPA client for SSH connections. Remember to replace the example host
and domain names with your own host and domain name:</p>
<p>1. The IPA client installation process does not configure the NTP
protocol service by default, but it is a good idea to make sure that
time on the IPA client and server is synchronized. If it is not, you
should run the following command on the IPA client. You will need to
stop <strong>ntpd</strong> and retsart it after the command is issued, because
<strong>ntpdate</strong> does not work if <strong>ntpd</strong> is running.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ntpdate -s -p 8 -u ipaserver.example.com</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Obtain a Kerberos ticket for the <strong>admin</strong> user.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># kinit admin</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Add a host service principal on the IPA client.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa-addservice host/ipaclient.example.com</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Retrieve the keytab.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa-getkeytab -s ipaserver.example.com -p host/ipaclient.example.com -k /etc/krb5.keytab</span>
</pre></div>
</div>
<p>Your IPA client should now be fully configured to accept incoming SSH
connections and authenticate with the user’s Kerberos credentials. Use
the following command from another machine to test the configuration.
This should succeed without asking for a password.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ssh admin@ipaclient.example.com</span>
</pre></div>
</div>
</section>
<section id="configuring-host-based-access-control">
<span id="id8"></span><h2>Configuring Host-Based Access Control<a class="headerlink" href="#configuring-host-based-access-control" title="Permalink to this heading">¶</a></h2>
<p>You can configure Red Hat Enterprise Linux and Fedora to allow or deny
access to IPA resources and services based on the configuration of the
host from which access is attempted. Refer to <a class="reference external" href="Obsolete:Administrators_Guide#Configuring_Host-Based_Access_Control">Configuring Host-Based
Access
Control</a>
for more information on this topic.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/archive/pages/ConfiguringFedoraClients.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>