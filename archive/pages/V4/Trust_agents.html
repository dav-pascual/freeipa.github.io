<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Overview &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Overview" href="Trust_to_Samba_AD_DC.html" />
    <link rel="prev" title="Overview" href="Trust_GC_support.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h1>
<p>FreeIPA supports trusted relationships with Active Directory via
cross-forest trust. Currently all functionality to support trusted
relationships with Active Directory must be present on every IPA master
which controls IPA clients where access to AD users is desired. There is
certain difference between uses of the IPA infrastructure which allow to
reduce requirements towards IPA masters involved in providing trust
features.</p>
<p>A trust controller is a FreeIPA master which runs following services:</p>
<ul class="simple">
<li><p>LDAP server with sigden, extdom, and cldap plugins</p></li>
<li><p>KDC with IPA driver</p></li>
<li><p>Samba configured with ipasam PASSDB module</p></li>
<li><p>SSSD with ipa_server_mode=True</p></li>
<li><p>Global Catalog instance (a separate LDAP instance with an
AD-compatible schema)</p></li>
</ul>
<p>A trust agent is a FreeIPA master which runs following services</p>
<ul class="simple">
<li><p>LDAP server with sigden and extdom plugins</p></li>
<li><p>KDC with IPA driver</p></li>
<li><p>SSSD with ipa_server_mode=True</p></li>
</ul>
<p>Trust agent is a master that relies on SSSD to do resolution of IDs.
Trust controller is used for managing trust: add trust agreements,
enable/disable separate domains from a trusted forest to access FreeIPA
resources, etc. Trust controller is also what Active Directory’s domain
controllers contact when validating the trust by means of SMB protocol
using LSA calls which implies running a Samba server.</p>
</section>
<section id="use-cases">
<h1>Use cases<a class="headerlink" href="#use-cases" title="Permalink to this heading">¶</a></h1>
<p>Two major use cases are:</p>
<ul class="simple">
<li><p>IPA replicas are used to resolve AD users and groups but not used to
administer trust (trust agents)</p></li>
<li><p>IPA replicas are used to establish trust and manipulate their
properties</p></li>
</ul>
<p>In case of trust agent, not running Samba suite reduces exposure for
possible security breaches. Additionally, such lightweight IPA replica
reduces possibility to negatively influence performance when trust is
validated as it will not be used by AD DCs to contact to validate trust.
AD DCs consider IPA replicas to contact based on DNS SRV records. If
lightweight IPA replica is not present in the corresponding MSDCS SRV
record, it will not be contacted and thus possible replication delays
will not cause validation issues. This is an important consideration
because currently FreeIPA does not have concept of sites and site-local
communication.</p>
</section>
<section id="design-and-implementation">
<span id="id1"></span><h1>Design and Implementation<a class="headerlink" href="#design-and-implementation" title="Permalink to this heading">¶</a></h1>
<p>Primary ticket: <a class="reference external" href="https://fedorahosted.org/freeipa/ticket/4951">https://fedorahosted.org/freeipa/ticket/4951</a> No major
code changes required, only defaults need to be changed on which plugins
are enabled and how they are used.</p>
<p>In order to support trust agents role, FreeIPA has changes
ipa-adtrust-install tool and updates to convert existing IPA masters
without ipa-adtrust-install into the ones that enable extdom and sidgen
plugins if any of ipa-adtrust-install artefacts are in the replicated
tree.</p>
<p>Running <strong>ipa-adtrust-install –add-agents</strong> at the IPA master which
handles trust setup is required to convert specific IPA masters. There
is now no need to run ipa-adtrust-install utility on all IPA masters, it
should be run only on those masters where trust is supposed to be
established.</p>
<p>Additionally, RPM dependencies need to change to allow installing Samba
libraries which are in use by SSSD components and extdom/sidgen plugins.</p>
<p>Enablement of slapi-nis to provide AD users’ access should depend on
whether compat tree is enabled at this IPA master already or not.</p>
</section>
<section id="feature-management">
<h1>Feature management<a class="headerlink" href="#feature-management" title="Permalink to this heading">¶</a></h1>
<section id="cli">
<h2>CLI<a class="headerlink" href="#cli" title="Permalink to this heading">¶</a></h2>
<p>no changes</p>
</section>
<section id="web-ui">
<span id="id2"></span><h2>Web UI<a class="headerlink" href="#web-ui" title="Permalink to this heading">¶</a></h2>
<p>no changes</p>
</section>
<section id="replication">
<h2>Replication<a class="headerlink" href="#replication" title="Permalink to this heading">¶</a></h2>
<p>no changes</p>
</section>
<section id="upgrades">
<h2>Upgrades<a class="headerlink" href="#upgrades" title="Permalink to this heading">¶</a></h2>
<p>Upgrade code automatically enables sidgen and extdom plugins.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../_sources/archive/pages/V4/Trust_agents.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>