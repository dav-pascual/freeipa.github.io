<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Introduction &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Introduction" href="ConfiguringSolarisClients.html" />
    <link rel="prev" title="Configuring Macintosh OS X 10.4 as an IPA Client" href="ConfiguringMacintoshClients.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <p>Back to <a class="reference external" href="FreeIPAv1:Client_Configuration_Guide">FreeIPAv1:Client Configuration
Guide</a></p>
<p>__TOC__</p>
<section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h1>
<p>This document describes the procedures required to configure Red Hat
Enterprise Linux as an IPA client. IPA 1.0 supports Red Hat Linux 2.1,
3, 4, and 5 as IPA clients.</p>
<p>This document distinguishes between commands to be run as root versus a
regular user. Commands to be run as root are prefixed with a # symbol.
Commands to be run as a regular user are prefixed with a $ symbol.</p>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /><strong>Note:</strong></p>
<blockquote>
<div><p>Before starting the freeIPA installation, ensure that you update
your system with all the latest packages.</p>
</div></blockquote>
</div></blockquote>
</section>
<section id="configuring-rhel-5-as-an-ipa-client">
<span id="id1"></span><h1>Configuring RHEL 5 as an IPA Client<a class="headerlink" href="#configuring-rhel-5-as-an-ipa-client" title="Permalink to this heading">¶</a></h1>
<section id="downloading-and-installing-the-ipa-packages">
<span id="id2"></span><h2>Downloading and Installing the IPA Packages<a class="headerlink" href="#downloading-and-installing-the-ipa-packages" title="Permalink to this heading">¶</a></h2>
<p>1. To download the IPA packages, log in to the Red Hat Network and
navigate to the “Downloads” area. Refer to <a class="reference external" href="http://www.redhat.com/docs/manuals/ipa/release-notes/1.0/index.html">Red Hat Enterprise IPA
Release
Notes</a>
for information on the appropriate channels.</p>
<p>2. Download the appropriate ISO for your system, and then either mount
it or burn it to suitable media.</p>
<ol class="arabic simple" start="3">
<li><p>Use the following command to install the IPA client and tools:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># yum install ipa-client ipa-admintools</span>
</pre></div>
</div>
<p>This should install all of the dependencies as well.</p>
<p>4. Add the DNS server’s IP address to the client’s <code class="docutils literal notranslate"><span class="pre">/etc/resolv.conf</span></code>
file.</p>
</section>
<section id="configuring-client-authentication">
<span id="id3"></span><h2>Configuring Client Authentication<a class="headerlink" href="#configuring-client-authentication" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /><strong>Note:</strong></p>
<blockquote>
<div><p>The IPA client requires that an IPA server already exist.</p>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple">
<li><p>Use the following command to set up the IPA client:</p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">ipa-client-install</span></code></p>
<blockquote>
<div><p><img alt="Caution.png" src="../../_images/Caution.png" /><strong>Caution:</strong></p>
<blockquote>
<div><p>Ensure that you use the correct script to set up the client.
Separate scripts exist for Red Hat Enterprise Linux 4 and 5, and
they are not interchangeable.</p>
</div></blockquote>
</div></blockquote>
<p>The script should set up the IPA client without prompting for any
further information. This includes configuring the name service cache
daemon to start at boot time. This will cache the most common name
service requests from the client, and reduce the load on the server.</p>
<p>When the script has finished configuring the IPA client, it will display
information about the realm, DNS domain, IPA server, etc. You should see
output similar to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Discovery was successful!
Realm: EXAMPLE.COM
DNS Domain: example.com
IPA Server: ipaserver.example.com
BaseDN: dc=example,dc=com
</pre></div>
</div>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /><strong>Note:</strong></p>
<blockquote>
<div><p>If your IPA server and client are not in the same domain, the
setup script will prompt you for the information that it requires.</p>
</div></blockquote>
</div></blockquote>
</section>
<section id="configuring-kerberos">
<span id="id4"></span><h2>Configuring Kerberos<a class="headerlink" href="#configuring-kerberos" title="Permalink to this heading">¶</a></h2>
<p>Only a basic Kerberos configuration file is created as part of the
client configuration procedures described here. You need to perform the
remaining configuration changes manually.</p>
<p>1. Modify the <code class="docutils literal notranslate"><span class="pre">/etc/krb5.conf</span></code> file on the client as shown below.
Ensure that you replace the example values with those that apply to your
deployment.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">libdefaults</span><span class="p">]</span>
 <span class="n">default_realm</span> <span class="o">=</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
 <span class="n">dns_lookup_realm</span> <span class="o">=</span> <span class="n">true</span>
 <span class="n">dns_lookup_kdc</span> <span class="o">=</span> <span class="n">true</span>
 <span class="n">forwardable</span> <span class="o">=</span> <span class="n">yes</span>
 <span class="n">ticket_lifetime</span> <span class="o">=</span> <span class="mi">24</span><span class="n">h</span>

<span class="p">[</span><span class="n">realms</span><span class="p">]</span>
 <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">kdc</span> <span class="o">=</span> <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">88</span>
  <span class="n">admin_server</span> <span class="o">=</span> <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">749</span>
  <span class="n">default_domain</span> <span class="o">=</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span>
 <span class="p">}</span>
<span class="p">[</span><span class="n">domain_realm</span><span class="p">]</span>
 <span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">=</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
 <span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">=</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
</pre></div>
</div>
</section>
<section id="configuring-client-tls">
<span id="id5"></span><h2>Configuring Client TLS<a class="headerlink" href="#configuring-client-tls" title="Permalink to this heading">¶</a></h2>
<p>The SSL/TLS settings are only required if you want to use SSL between
the clients and the server when performing operations such as account
lookups.</p>
<p>TLS Client Configuration for Linux clients is detailed at
<a class="reference external" href="http://directory.fedora.redhat.com/wiki/Howto:SSL">http://directory.fedora.redhat.com/wiki/Howto:SSL</a>. Refer to this link if
any additional information is required. The basic steps required are:</p>
<ol class="arabic simple">
<li><p>Modify the following in the <code class="docutils literal notranslate"><span class="pre">/etc/ldap.conf</span></code> file:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">URI</span>     <span class="n">ldap</span><span class="p">:</span><span class="o">//</span><span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="n">BASE</span> <span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">HOST</span> <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="n">TLS_CACERTDIR</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cacerts</span><span class="o">/</span>
<span class="n">TLS_REQCERT</span> <span class="n">allow</span>
</pre></div>
</div>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>Ensure that the directory you specify for TLS_CACERTDIR actually
exists.</p>
</div></blockquote>
</div></blockquote>
<p>2. Export your CA certificate to ASCII using the <strong>certutil</strong> utility
with the <strong>-a</strong> option.</p>
<p>3. Install this certificate in the <code class="docutils literal notranslate"><span class="pre">/etc/cacerts</span></code> directory as
follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># cp cacert.asc /etc/cacerts/`openssl x509 -noout \
  -hash -in cacert.asc`.0

The file name is the hash of the contents with a &quot;.0&quot; extension.
</pre></div>
</div>
<p>4. If the TLS_CACERTDIR directive does not work, set the cacert file
directly:</p>
<p><code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">TLS_CACERT</span> <span class="pre">/etc/cacerts/cacert.asc</span></code></p>
<blockquote>
<div><p>If more than one CA certificate is required, concatenate these
certificates into a single file.</p>
</div></blockquote>
</section>
<section id="configuring-nfs-v4-with-kerberos">
<span id="id6"></span><h2>Configuring NFS v4 with Kerberos<a class="headerlink" href="#configuring-nfs-v4-with-kerberos" title="Permalink to this heading">¶</a></h2>
<p>Use the following procedure to configure NFS on the IPA client:</p>
<ol class="arabic simple">
<li><p>Obtain a Kerberos ticket for the <strong>admin</strong> user.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># kinit admin</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Add an NFS service principal on the client.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa-addservice nfs/ipaclient.example.com</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Get a keytab for the NFS service principal.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa-getkeytab -s ipaserver.example.com -p nfs/ipaclient.example.com -k /etc/krb5.keytab</span>
</pre></div>
</div>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /><strong>Note:</strong></p>
<blockquote>
<div><p>The Linux NFS implementation still has limited encryption type
support. You may need to use the <strong>-e des-cbc-crc</strong> option to the
<strong>ipa-getkeytab</strong> command for any <strong>nfs/&lt;FQDN&gt;</strong> service keytabs
you want to set up, both on the server and on all clients. This
will instruct the KDC to generate only DES keys.</p>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Add the following line to the <code class="docutils literal notranslate"><span class="pre">/etc/sysconfig/nfs</span></code> file:</p></li>
</ol>
<p><strong>SECURE_NFS=yes</strong></p>
<ol class="arabic simple" start="5">
<li><p>Start the <strong>rpcgssd</strong> daemon.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># service rpcgssd start</span>
</pre></div>
</div>
<p>Your IPA client should now be fully configured to mount NFS shares using
your Kerberos credentials. You can use the following command to test the
configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># mount -v -t nfs4 -o sec=krb5 ipaserver.example.com:/ /mnt</span>
</pre></div>
</div>
</section>
<section id="configuring-client-ssh-access">
<span id="id7"></span><h2>Configuring Client SSH Access<a class="headerlink" href="#configuring-client-ssh-access" title="Permalink to this heading">¶</a></h2>
<p>You can also configure the IPA client to accept incoming SSH requests
and authenticate with the user’s Kerberos credentials. After installing
and configuring the IPA client, use the following procedure to configure
the IPA client for SSH connections. Remember to replace the example host
and domain names with your own host and domain name:</p>
<p>1. The IPA client installation process does not configure the NTP
protocol service by default, but it is a good idea to make sure that
time on the IPA client and server is synchronized. If it is not, you
should run the following command on the IPA client. You will need to
stop <strong>ntpd</strong> and restart it after the command is issued, because
<strong>ntpdate</strong> does not work if <strong>ntpd</strong> is running.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ntpdate -s -p 8 -u ipaserver.example.com</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Obtain a Kerberos ticket for the <strong>admin</strong> user.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># kinit admin</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Add a host service principal on the IPA client.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa-addservice host/ipaclient.example.com</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Retrieve the keytab.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa-getkeytab -s ipaserver.example.com -p host/ipaclient.example.com -k /etc/krb5.keytab</span>
</pre></div>
</div>
<p>Your IPA client should now be fully configured to accept incoming SSH
connections and authenticate with the user’s Kerberos credentials. Use
the following command from another machine to test the configuration.
This should succeed without asking for a password.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ssh admin@ipaclient.example.com</span>
</pre></div>
</div>
</section>
<section id="configuring-host-based-access-control">
<span id="id8"></span><h2>Configuring Host-Based Access Control<a class="headerlink" href="#configuring-host-based-access-control" title="Permalink to this heading">¶</a></h2>
<p>You can configure Red Hat Enterprise Linux and Fedora to allow or deny
access to IPA resources and services based on the configuration of the
host from which access is attempted. Refer to <a class="reference external" href="Obsolete:Administrators_Guide#Configuring_Host-Based_Access_Control">Configuring Host-Based
Access
Control</a>
for more information on this topic.</p>
</section>
</section>
<section id="configuring-rhel-4-as-an-ipa-client">
<span id="id9"></span><h1>Configuring RHEL 4 as an IPA Client<a class="headerlink" href="#configuring-rhel-4-as-an-ipa-client" title="Permalink to this heading">¶</a></h1>
<section id="downloading-and-installing-the-ipa-packages-1">
<span id="id10"></span><h2>Downloading and Installing the IPA Packages<a class="headerlink" href="#downloading-and-installing-the-ipa-packages-1" title="Permalink to this heading">¶</a></h2>
<p>1. To download the IPA packages, log in to the Red Hat Network and
navigate to the “Downloads” area. Refer to <a class="reference external" href="http://www.redhat.com/docs/manuals/ipa/release-notes/1.0/index.html">Red Hat Enterprise IPA
Release
Notes</a>
for information on the appropriate channels.</p>
<ol class="arabic simple" start="2">
<li><p>Use the following command to install the IPA client and tools:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># rpm -ivh ipa-client-&lt;version&gt;.rpm</span>
</pre></div>
</div>
<p>This should install all of the dependencies as well.</p>
<p>2. If your IPA server was set up for DNS, and is in the same domain as
the client, add the server’s IP address to the client’s
<code class="docutils literal notranslate"><span class="pre">/etc/resolv.conf</span></code> file.</p>
</section>
<section id="configuring-client-authentication-1">
<span id="id11"></span><h2>Configuring Client Authentication<a class="headerlink" href="#configuring-client-authentication-1" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /><strong>Note:</strong></p>
<blockquote>
<div><p>The IPA client requires that an IPA server already exist.</p>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple">
<li><p>Create the <code class="docutils literal notranslate"><span class="pre">/etc/ipa/ipa.conf</span></code> file.</p></li>
<li><p>Use the following command to set up the IPA client:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa-client-setup --server ipaserver.example.com</span>
</pre></div>
</div>
<blockquote>
<div><p><img alt="Caution.png" src="../../_images/Caution.png" /><strong>Caution:</strong></p>
<blockquote>
<div><p>Ensure that you use the correct script to set up the client.
Separate scripts exist for Red Hat Enterprise Linux 4 and 5, and
they are not interchangeable.</p>
</div></blockquote>
</div></blockquote>
<p>The script should set up the IPA client without prompting for any
further information. This includes configuring the name service cache
daemon to start at boot time. This will cache the most common name
service requests from the client, and reduce the load on the server.</p>
<ol class="arabic" start="3">
<li><p>Reboot the client machine.</p>
<p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>The RHEL 4 version of the IPA client installation script does not
perform auto-discovery, and neither does it configure the client
machine to perform auto-discovery.</p>
</div></blockquote>
</li>
</ol>
</section>
<section id="configuring-kerberos-1">
<span id="id12"></span><h2>Configuring Kerberos<a class="headerlink" href="#configuring-kerberos-1" title="Permalink to this heading">¶</a></h2>
<p>Only a basic Kerberos configuration file is created as part of the
Client Configuration procedures described above. You need to perform the
remaining configuration changes manually.</p>
<p>1. Modify the <code class="docutils literal notranslate"><span class="pre">/etc/krb5.conf</span></code> file on the client as shown below.
Ensure that you replace the example values with those that apply to your
deployment.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">libdefaults</span><span class="p">]</span>
 <span class="n">default_realm</span> <span class="o">=</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
 <span class="n">dns_lookup_realm</span> <span class="o">=</span> <span class="n">true</span>
 <span class="n">dns_lookup_kdc</span> <span class="o">=</span> <span class="n">true</span>
 <span class="n">forwardable</span> <span class="o">=</span> <span class="n">yes</span>
 <span class="n">ticket_lifetime</span> <span class="o">=</span> <span class="mi">24</span><span class="n">h</span>

<span class="p">[</span><span class="n">realms</span><span class="p">]</span>
 <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">kdc</span> <span class="o">=</span> <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">88</span>
  <span class="n">admin_server</span> <span class="o">=</span> <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">749</span>
  <span class="n">default_domain</span> <span class="o">=</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span>
 <span class="p">}</span>
<span class="p">[</span><span class="n">domain_realm</span><span class="p">]</span>
 <span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">=</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
 <span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">=</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
</pre></div>
</div>
</section>
<section id="configuring-client-tls-1">
<span id="id13"></span><h2>Configuring Client TLS<a class="headerlink" href="#configuring-client-tls-1" title="Permalink to this heading">¶</a></h2>
<p>The SSL/TLS settings are only required if you want to use SSL between
the clients and the server when performing operations such as account
lookups.</p>
<p>TLS Client Configuration for Linux clients is detailed at
<a class="reference external" href="http://directory.fedora.redhat.com/wiki/Howto:SSL">http://directory.fedora.redhat.com/wiki/Howto:SSL</a>. Refer to this link if
any additional information is required. The basic steps required are:</p>
<ol class="arabic simple">
<li><p>Modify the following in the <code class="docutils literal notranslate"><span class="pre">/etc/ldap.conf</span></code> file:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">URI</span>     <span class="n">ldap</span><span class="p">:</span><span class="o">//</span><span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="n">BASE</span> <span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">HOST</span> <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="n">TLS_CACERTDIR</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cacerts</span><span class="o">/</span>
<span class="n">TLS_REQCERT</span> <span class="n">allow</span>
</pre></div>
</div>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>Ensure that the directory you specify for TLS_CACERTDIR actually
exists.</p>
</div></blockquote>
</div></blockquote>
<p>2. Export your CA certificate to ASCII using the certutil utility with
-a option.</p>
<p>3. Install this certificate in the <code class="docutils literal notranslate"><span class="pre">/etc/cacerts</span></code> directory as
follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># cp cacert.asc /etc/cacerts/`openssl x509 -noout \
  -hash -in cacert.asc`.0

The file name is the hash of the contents with a &quot;.0&quot; filename
extension.
</pre></div>
</div>
<p>4. If the TLS_CACERTDIR directive does not work, set the cacert file
directly:</p>
<p><code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">TLS_CACERT</span> <span class="pre">/etc/cacerts/cacert.asc</span></code></p>
<blockquote>
<div><p>If more than one CA certificate is required, concatenate these
certificates into a single file.</p>
</div></blockquote>
</section>
<section id="system-login">
<span id="id14"></span><h2>System Login<a class="headerlink" href="#system-login" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>On the RHEL 4 system console, log in as an IPA user. After you have
logged in, open a terminal and try these commands:</p></li>
</ul>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">id (look for userid and group id correctness)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">getent passwd</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">getent group</span></code></div>
</div>
</section>
<section id="configuring-nfs-v4-with-kerberos-1">
<span id="id15"></span><h2>Configuring NFS v4 with Kerberos<a class="headerlink" href="#configuring-nfs-v4-with-kerberos-1" title="Permalink to this heading">¶</a></h2>
<p>Use the following procedure to configure NFS on the IPA client:</p>
<ol class="arabic simple">
<li><p>Obtain a Kerberos ticket for the <strong>admin</strong> user.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># kinit admin</span>
</pre></div>
</div>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>The <strong>ipa-admintools</strong> package is not available for RHEL 4.
Consequently, you need to perform the following steps on the IPA
server.</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Add an NFS service principal for the client.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa-addservice nfs/ipaclient.example.com</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Retrieve the NFS keytab.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa-getkeytab -s ipaserver.example.com -p nfs/ipaclient.example.com -k /tmp/krb5.keytab</span>
<span class="c1"># klist -ket /tmp/krb5.keytab (to verify)</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Copy the keytab from the server to the client.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># scp /tmp/krb5.keytab root@ipaclient.example.com:/tmp/krb5.conf</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>On the IPA client, use the <strong>ktutil</strong> command to import the keytab.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ktutil</span>
 <span class="n">ktutil</span><span class="p">:</span> <span class="n">read_kt</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">krb5</span><span class="o">.</span><span class="n">keytab</span>
 <span class="n">ktutil</span><span class="p">:</span> <span class="n">write_kt</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">krb5</span><span class="o">/</span><span class="n">krb5</span><span class="o">.</span><span class="n">keytab</span>
 <span class="n">ktutil</span><span class="p">:</span> <span class="n">q</span>
</pre></div>
</div>
<ol class="arabic" start="6">
<li><p>Add the following line to the <code class="docutils literal notranslate"><span class="pre">/etc/sysconfig/nfs</span></code> file:</p>
<p><strong>SECURE_NFS=yes</strong></p>
</li>
<li><p>Start the <strong>rpcgssd</strong> daemon.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># /etc/init.d/rpcgssd start</span>
</pre></div>
</div>
<p>Your IPA client should now be fully configured to mount NFS shares using
your Kerberos credentials. You can use the following command to test the
configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># mount -v -t nfs4 -o sec=krb5 ipaserver.example.com:/ /mnt</span>
</pre></div>
</div>
</section>
<section id="configuring-client-ssh-access-1">
<span id="id16"></span><h2>Configuring Client SSH Access<a class="headerlink" href="#configuring-client-ssh-access-1" title="Permalink to this heading">¶</a></h2>
<p>You can configure the IPA client to accept incoming SSH requests and
authenticate with the user’s Kerberos credentials. After installing and
configuring the IPA client, use the following procedure to configure the
IPA client for SSH connections. Remember to replace the example host and
domain names with your own host and domain name:</p>
<p>1. The IPA client installation process does not configure the NTP
protocol service by default, but it is a good idea to make sure that
time on the IPA client and server is synchronized. If it is not, you
should run the following command on the IPA client. You will need to
stop <strong>ntpd</strong> and retsart it after the command is issued, because
<strong>ntpdate</strong> does not work if <strong>ntpd</strong> is running.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ntpdate -s -p 8 -u ipaserver.example.com</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Obtain a Kerberos ticket for the <strong>admin</strong> user.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># kinit admin</span>
<span class="c1"># klist (to verify that you received a ticket)</span>
</pre></div>
</div>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /> <strong>Note:</strong></p>
<blockquote>
<div><p>The <strong>ipa-admintools</strong> package is not available for RHEL 4.
Consequently, you need to perform the following commands on the
IPA server.</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Add a host service principal.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa-addservice host/ipaclient.example.com</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Retrieve the host keytab.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ipa-getkeytab -s ipaserver.example.com -p host/ipaclient.example.com -k /tmp/krb5.keytab</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Copy the keytab from the server to the client.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># scp /tmp/krb5.keytab root@ipaclient.example.com:/tmp/krb5.keytab</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>On the IPA client, use the <strong>ktutil</strong> command to import the keytab.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ktutil</span>
 <span class="n">ktutil</span><span class="p">:</span> <span class="n">read_kt</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">krb5</span><span class="o">.</span><span class="n">keytab</span>
 <span class="n">ktutil</span><span class="p">:</span> <span class="n">write_kt</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">krb5</span><span class="o">/</span><span class="n">krb5</span><span class="o">.</span><span class="n">keytab</span>
 <span class="n">ktutil</span><span class="p">:</span> <span class="n">q</span>
</pre></div>
</div>
<p>Your IPA client should now be fully configured to accept incoming SSH
connections and authenticate with the user’s Kerberos credentials. Use
the following command from another machine to test the configuration.
This should succeed without asking for a password.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ssh admin@ipaclient.example.com</span>
</pre></div>
</div>
</section>
<section id="configuring-host-based-access-control-1">
<span id="id17"></span><h2>Configuring Host-Based Access Control<a class="headerlink" href="#configuring-host-based-access-control-1" title="Permalink to this heading">¶</a></h2>
<p>You can configure Red Hat Enterprise Linux and Fedora to allow or deny
access to IPA resources and services based on the configuration of the
host from which access is attempted. Refer to <a class="reference external" href="Obsolete:Administrators_Guide#Configuring_Host-Based_Access_Control">Configuring Host-Based
Access
Control</a>
for more information on this topic.</p>
</section>
</section>
<section id="configuring-rhel-2-1-and-3-as-ipa-clients">
<span id="id18"></span><h1>Configuring RHEL 2.1 and 3 as IPA Clients<a class="headerlink" href="#configuring-rhel-2-1-and-3-as-ipa-clients" title="Permalink to this heading">¶</a></h1>
<p>The following procedure describes how to configure RHEL 2.1 and RHEL 3
as IPA clients. The procedures are the same for each. There are no IPA
packages or installation scripts for either of these distributions; the
process is completely manual.</p>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /><strong>Note:</strong></p>
<blockquote>
<div><p>The IPA client requires that an IPA server already exist.</p>
</div></blockquote>
</div></blockquote>
<section id="configuring-kerberos-2">
<span id="id19"></span><h2>Configuring Kerberos<a class="headerlink" href="#configuring-kerberos-2" title="Permalink to this heading">¶</a></h2>
<p><strong>To set up client authentication:</strong></p>
<ol class="arabic simple">
<li><p>Run <strong>authconfig</strong> as the root user.</p></li>
</ol>
<p>2. On the <strong>User Information Configuration</strong> screen, select <strong>LDAP</strong>,
and enter the server name and Base DN.</p>
<blockquote>
<div><p><img alt="Note.png" src="../../_images/Note.png" /><strong>Note:</strong></p>
<blockquote>
<div><p>The Base DN is the realm name translated into “dc” components. For
example:</p>
<p>EXAMPLE.COM -&gt; dc=example,dc=com</p>
<p>This step does not fully configure nss_ldap. Further configuration
is described in the following procedure.</p>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Navigate to the <strong>Authentication Configuration</strong> screen.</p></li>
<li><p>Ensure that <strong>Use LDAP Authentication</strong> is NOT selected.</p></li>
</ol>
<p>5. Select <strong>Use Kerberos 5</strong> and enter the following details (modify to
suit your deployment):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Realm</span><span class="p">:</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
<span class="n">KDC</span><span class="p">:</span> <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">88</span>
<span class="n">Admin</span> <span class="n">Server</span><span class="p">:</span> <span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">749</span>
</pre></div>
</div>
<p>6. Press <strong>Enter</strong> or click <strong>OK</strong> to save the configuration and exit
the <strong>authconfig</strong> utility.</p>
<p>Kerberos should now be correctly configured.</p>
</section>
<section id="configuring-ldap">
<span id="id20"></span><h2>Configuring LDAP<a class="headerlink" href="#configuring-ldap" title="Permalink to this heading">¶</a></h2>
<p>You need to make the following configuration changes to the
<code class="docutils literal notranslate"><span class="pre">/etc/ldap.conf</span></code> file to complete the client configuration for RHEL 3.
Modify the examples provided to suit your deployment. You may need to
add some of these entries if they do not exist in the original file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ldap_version 3
host ipaserver.example.com
base dc=example,dc=com

nss_base_passwd cn=users,cn=accounts,dc=example,dc=com?sub
nss_base_group cn=groups,cn=accounts,dc=example,dc=com?sub
nss_schema rfc2307bis
nss_map_attribute uniqueMember member
nss_initgroups_ignoreusers root

nss_reconnect_maxsleeptime 8
nss_reconnect_sleeptime 1
bind_timelimit 5
timelimit 15

ssl no
</pre></div>
</div>
<p>This completes the configuration steps for IPA.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/archive/pages/ConfiguringRhelClients.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>