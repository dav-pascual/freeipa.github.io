<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>LDAP Overview &#8212; FreeIPA  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Details" href="Migrate_your_code_to_the_new_LDAP_API.html" />
    <link rel="prev" title="1.The Agent" href="Integrate_With_Okta.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="ldap-overview">
<span id="id1"></span><h1>LDAP Overview<a class="headerlink" href="#ldap-overview" title="Permalink to this heading">¶</a></h1>
<p>This guide is meant to provide general guidance on configuring an LDAP
client to connect to IPA. There are specific guides/Howtos for some
clients/servers.</p>
</section>
<section id="data-layout-dit">
<span id="id2"></span><h1>Data layout (DIT)<a class="headerlink" href="#data-layout-dit" title="Permalink to this heading">¶</a></h1>
<p>The basedn in an IPA installation consists of a set of domain components
(dc) for the initial domain that IPA was configured with. If you
installed IPA with the domain example.com then your basedn is
<code class="docutils literal notranslate"><span class="pre">dc=example,dc=com</span></code>. We often refer to this as $SUFFIX. Don’t confuse
this with DNS domains. You will only ever have one basedn, the one
defined during installation.</p>
<p>You can find your basedn, and other interesting things, in
<code class="docutils literal notranslate"><span class="pre">/etc/ipa/default.conf</span></code></p>
<p>IPA uses a flat structure, storing like objects in what we call
containers. Some container examples are:</p>
<ul class="simple">
<li><p>Users: <code class="docutils literal notranslate"><span class="pre">cn=users,cn=accounts,$SUFFIX</span></code></p></li>
<li><p>Groups: <code class="docutils literal notranslate"><span class="pre">cn=groups,cn=accounts,$SUFFIX</span></code></p></li>
</ul>
</section>
<section id="system-accounts">
<span id="id3"></span><h1>System Accounts<a class="headerlink" href="#system-accounts" title="Permalink to this heading">¶</a></h1>
<p>There are some LDAP clients that need a pre-configured account. Some
examples are the LDAP autofs client and sudo. Using a user’s credentials
is generally preferable to creating a shared system account but that is
not always possible. Do <strong>not</strong> use the Directory Manager account to
authenticate remote services to the IPA LDAP server. Use a system
account, created like this:.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ldapmodify -x -D &#39;cn=Directory Manager&#39; -W</span>
<span class="n">dn</span><span class="p">:</span> <span class="n">uid</span><span class="o">=</span><span class="n">system</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">sysaccounts</span><span class="p">,</span><span class="n">cn</span><span class="o">=</span><span class="n">etc</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">changetype</span><span class="p">:</span> <span class="n">add</span>
<span class="n">objectclass</span><span class="p">:</span> <span class="n">account</span>
<span class="n">objectclass</span><span class="p">:</span> <span class="n">simplesecurityobject</span>
<span class="n">uid</span><span class="p">:</span> <span class="n">system</span>
<span class="n">userPassword</span><span class="p">:</span> <span class="n">secret123</span>
<span class="n">passwordExpirationTime</span><span class="p">:</span> <span class="mi">20380119031407</span><span class="n">Z</span>
<span class="n">nsIdleTimeout</span><span class="p">:</span> <span class="mi">0</span>
<span class="o">&lt;</span><span class="n">blank</span> <span class="n">line</span><span class="o">&gt;</span>
<span class="o">^</span><span class="n">D</span>
</pre></div>
</div>
<p>Be sure to change the password to something more secure, and the uid to
something reasonable.</p>
<p>The reason to use an account like this rather than creating a normal
user account in IPA and using that is that the system account exists
only for binding to LDAP. It is not a real POSIX user, can’t log into
any systems and doesn’t own any files.</p>
<p>This use also has no special rights and is unable to write any data in
the IPA LDAP server, only read.</p>
<p>Note: IPA 4.0 is going to change the default stance on data from nearly
everything is readable to nothing is readable, by default. You will
eventually need to add some Access Control Instructions (ACI’s) to grant
read access to the parts of the LDAP tree you will need.</p>
<section id="handy-helper-for-system-accounts-management">
<span id="id4"></span><h2>Handy helper for system accounts management<a class="headerlink" href="#handy-helper-for-system-accounts-management" title="Permalink to this heading">¶</a></h2>
<p>Noah Bliss
<a class="reference external" href="https://lists.fedorahosted.org/archives/list/freeipa-devel&#64;lists.fedorahosted.org/message/AI4WSAMPKF4OSV6DFMKKTDEK4P7Y33SF/">created</a>
a shell helper to manage system accounts:
<a class="reference external" href="https://github.com/noahbliss/freeipa-sam">freeipa-sam</a>.</p>
</section>
</section>
<section id="ssl-starttls">
<h1>SSL/startTLS<a class="headerlink" href="#ssl-starttls" title="Permalink to this heading">¶</a></h1>
<p>When possible, configure your LDAP client to communicate over SSL/TLS.
You can either use port 389 and enable startTLS in the client or
configure to use the ldaps port, 636. The IPA CA certificate can be
found in /etc/ipa/ca.crt on all enrolled hosts.</p>
</section>
<section id="tool-configuration">
<span id="id5"></span><h1>Tool configuration<a class="headerlink" href="#tool-configuration" title="Permalink to this heading">¶</a></h1>
<p>Since IPA 3.0 we’ve configured /etc/openldap/ldap.conf with some bare
defaults:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">URI</span> <span class="n">ldaps</span><span class="p">:</span><span class="o">//</span><span class="n">ipaserver</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="n">BASE</span> <span class="n">dc</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span>
<span class="n">TLS_CACERT</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ipa</span><span class="o">/</span><span class="n">ca</span><span class="o">.</span><span class="n">crt</span>
</pre></div>
</div>
<p>Setting these defaults means you don’t need to pass as many options to
tools like ldapsearch.</p>
<p>So you can do this:</p>
<p><code class="docutils literal notranslate"><span class="pre">$ ldapsearch -x uid=admin</span></code></p>
<p>Rather than:</p>
<p><code class="docutils literal notranslate"><span class="pre">$ ldapsearch -x -h ipa.example.com  -b dc=example,dc=com uid=admin</span></code></p>
</section>
<section id="unix-clients">
<span id="id6"></span><h1>Unix clients<a class="headerlink" href="#unix-clients" title="Permalink to this heading">¶</a></h1>
<p>For specific information on configuring Unix clients to authenticate
against IPA, see <a class="reference external" href="ConfiguringUnixClients">ConfiguringUnixClients</a></p>
<p>As a general rule, we recommend using RFC 2307bis when possible. If this
is not possible, we provide a compatibility layer that provides the same
information in an RFC 2307-compatible way. The only change you need to
make is to set the <code class="docutils literal notranslate"><span class="pre">basedn</span></code> to <code class="docutils literal notranslate"><span class="pre">cn=compat,$SUFFIX</span></code></p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/freeipa-logo-small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, FreeIPA Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../_sources/archive/pages/HowTo/LDAP.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>